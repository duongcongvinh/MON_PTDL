(self.webpackChunktrello_client=self.webpackChunktrello_client||[]).push([[70128],{"./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js":(e,t,r)=>{"use strict";r.d(t,{fg:()=>y,B:()=>g});var i,s,n=!((null==globalThis||null===(i=globalThis.process)||void 0===i||null===(i=i.env)||void 0===i?void 0:i.JEST_WORKER_ID)!==void 0)&&(null==globalThis||null===(s=globalThis.process)||void 0===s||null===(s=s.env)||void 0===s?void 0:s.NODE_ENV)!=="production",o=function(){var e;n&&(e=console).debug.apply(e,arguments)},a=r("./node_modules/process/browser.js"),l="__PLATFORM_FEATURE_FLAGS__",c=void 0!==a&&void 0!==a.env,u=!!c&&"true"===a.env.ENABLE_PLATFORM_FF,d=!!c&&"true"===a.env.STORYBOOK_ENABLE_PLATFORM_FF,p=u||d,h={earlyResolvedFlags:new Map,booleanResolver:function(e){return!1}},m="undefined"!=typeof window?window:globalThis;function f(e){if(p)return o('[%s]: The feature flags were enabled while running tests. The flag "%s" will be always enabled.',"@atlaskit/platform-feature-flags",e),!0;try{var t,r=null===(t=m[l])||void 0===t?void 0:t.booleanResolver(e);if("boolean"!=typeof r)return console.warn("".concat(e," resolved to a non-boolean value, returning false for safety")),!1;return r}catch(e){return!1}}function g(e){return f(e)}function y(e){return f(e)}m[l]=m[l]||h},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js":(e,t,r)=>{"use strict";r.d(t,{IC:()=>k,vr:()=>j,ff:()=>P,oG:()=>x,rY:()=>T});var i=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebTypes.js"),n=r("./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebClient.js"),o=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/bsc-global-state/index.js"),l=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),c=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),u=r("./node_modules/@babel/runtime/regenerator/index.js"),d=r.n(u),p=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),h=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),m=new(function(){function e(){(0,p.A)(this,e)}return(0,h.A)(e,[{key:"cachedSamplingConfig",get:function(){return this.cache},set:function(e){this.cache=e}}]),e}()),f=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/is-ssr/index.js"),g=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/load-storage-controls-data/index.js"),y={usedGetCookie:1e5,usedGetCookieError:1,usedSetCookie:1e3,usedSetCookieError:1,usedSetStrictlyNecessaryCookie:1e4,usedSetStrictlyNecessaryCookieError:1,usedDeleteCookie:10,usedDeleteCookieError:1,usedCheckThirdParty:1e5,checkThirdPartyError:1,usedDocumentCookie:100,usedDocumentCookieError:1,initializeControlsError:1,loadStorageControlsError:1,updatePreferencesError:1,fetchConsentPreferencesError:1,saveConsentPreferencesError:1},b=["loadStorageControlsError"];function v(){return(v=(0,c.A)(d().mark(function e(){var t,r;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.cachedSamplingConfig){e.next=2;break}return e.abrupt("return",m.cachedSamplingConfig);case 2:if(!(0,f.f)()){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.next=6,(0,g.YV)();case 6:return r=null==(t=e.sent)?void 0:t.analyticsSamplingRatio,m.cachedSamplingConfig=r,e.abrupt("return",r);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(){return(C=(0,c.A)(d().mark(function e(t){var r,i,s;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.includes(t)){e.next=2;break}return e.abrupt("return",y[t]);case 2:return e.next=4,function(){return v.apply(this,arguments)}();case 4:return s=(null==(i=null!=(r=e.sent)?r:y)?void 0:i[t])!==void 0?i[t]:y[t],e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(){return(w=(0,c.A)(d().mark(function e(t,r){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e){return C.apply(this,arguments)}(t);case 2:Math.floor(Math.random()*e.sent)||r();case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var I=function(){var e=window.location.hostname;return e.includes(".dev.")||e.includes(".stg.")?s.sR.STAGING:e.includes("localhost")||e.includes("ngrok")||e.includes("atlastunnel")?s.sR.DEV:s.sR.PROD},E=function(e){var t="";if(!e)return t;var r=function(t){return new RegExp("^".concat(t,"(/|$)")).test(String(e))};return r("/wiki")&&(t="/wiki"),r("/jira")&&(t="/jira"),r("/compass")&&(t="/compass"),r("/canvas")&&(t="/canvas"),(r("/servicedesk")||r("/jira/servicedesk"))&&(t="/servicedesk"),t},A=function(){var e=window.location,t=e.origin,r=E(e.pathname),i="".concat(t).concat(r),s=("https://trello.com"===i?"trello":null)||r.slice(1);return{domain:i,product:s}},S=function(e){var t,r,i=A(),s=i.domain,n=i.product;return O({featureFlagOn:(0,o.fg)("platform.moonjelly.browser-storage-controls"),packageName:"@atlassian/browser-storage-controls",packageVersion:"3.2.2",domain:s,product:null!==(t=null===(r=(0,a.re)().product)||void 0===r?void 0:r.toLowerCase())&&void 0!==t?t:n},e&&e)},k=function(){var e;return function(){try{!e&&(0,a.re)().analyticsEnabled&&(e=new n.A({env:I(),product:"atlassianCookies"},{useLegacyUrl:!1,disableCookiePersistence:!0}))}catch(e){l.V.error("Failed to initialize AnalyticsWebClient. ".concat(e))}if((0,a.re)().analyticsEnabled)return e}}();function j(e){!function(e,t){w.apply(this,arguments)}(e.action,function(){var t;return null===(t=k())||void 0===t?void 0:t.sendOperationalEvent({source:"package",actionSubject:"package",action:e.action,attributes:S(e.attributes)})})}function T(e){var t;null===(t=k())||void 0===t||t.sendUIEvent(O(O({},e),{},{attributes:S(e.attributes)}))}function P(e){var t;null===(t=k())||void 0===t||t.sendScreenEvent(O(O({},e),{},{attributes:S(e.attributes)}))}function x(e){var t;null===(t=k())||void 0===t||t.sendTrackEvent(O(O({},e),{},{attributes:S(e.attributes)}))}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/bsc-global-state/index.js":(e,t,r)=>{"use strict";r.d(t,{B_:()=>o,re:()=>n});var i,s,n=function(){return null==i&&(i=!0),{analyticsEnabled:i,product:s}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.analyticsEnabled,r=e.product;i=void 0===t||t,s=void 0===r?"NONE":r}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/is-ssr/index.js":(e,t,r)=>{"use strict";r.d(t,{f:()=>o});var i=r("./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebClient.js"),s=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),n=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),o=function(){var e="undefined"==typeof document||"undefined"==typeof window||!Document||!Document.prototype||!Object||!Object.defineProperty,t=!s.fg,r=!i.A;return e&&n.V.warn("Browser context is not available."),t&&n.V.warn("Platform Feature Flag library is not available"),i.A||n.V.warn("analytics-web-client is not available"),!!e||!!t||!!r}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/load-storage-controls-data/index.js":(e,t,r)=>{"use strict";r.d(t,{YV:()=>p});var i,s,n,o=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),a=r("./node_modules/@babel/runtime/regenerator/index.js"),l=r.n(a),c=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),u=function(){i=void 0,s=void 0,n=void 0},d=function(){var e=(0,o.A)(l().mark(function e(t){var r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Error("Failed to fetch Cookies Cache! Cached promise was undefined");case 2:return e.next=4,t;case 4:if((r=e.sent).ok){e.next=7;break}throw Error("Failed to fetch Cookies Cache! status: ".concat(r.status));case 7:return n=n||(null==r?void 0:r.json()),e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,o.A)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=4;break}return e.abrupt("return",i);case 4:return e.prev=4,s||(s=fetch("https://atlassian-cookies--categories.us-east-1.prod.public.atl-paas.net/categories.json")),e.next=8,d(s);case 8:return i=e.sent,e.abrupt("return",i);case 12:e.prev=12,e.t0=e.catch(4),c.V.errorWithOperationalEvent({action:"loadStorageControlsError",message:e.t0.message||""}),u();case 16:case"end":return e.stop()}},e,null,[[4,12]])}));return function(){return e.apply(this,arguments)}}()},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js":(e,t,r)=>{"use strict";r.d(t,{V:()=>c});var i=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),n=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}var l="[browser-storage-controls]",c=function(){function e(){(0,s.A)(this,e)}return(0,n.A)(e,null,[{key:"info",value:function(e,t){console.log("".concat(l,": ").concat(e),t?JSON.stringify(t):"")}},{key:"error",value:function(e,t){console.error("".concat(l,": ").concat(e),t?JSON.stringify(t):"")}},{key:"errorWithOperationalEvent",value:function(e){var t=e.action,r=e.attributes,s=e.message,n=e.metadata;try{(0,o.vr)({action:t,attributes:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({error:s},void 0===r?{}:r)})}catch(e){this.error("Failed to send operational event on error: ".concat(t,". ").concat(e.message||""))}this.error(s,n?JSON.stringify(n):"")}},{key:"warn",value:function(e,t){console.warn("".concat(l,": ").concat(e),t?JSON.stringify(t):"")}}]),e}()},"./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/get-cookie/index.js":(e,t,r)=>{"use strict";r.d(t,{R:()=>l});var i=r("./node_modules/js-cookie/src/js.cookie.js"),s=r.n(i),n=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),o=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js");function l(e){try{return(0,n.fg)("platform.moonjelly.browser-storage-controls")&&(0,o.vr)({action:"usedGetCookie",attributes:{cookieKey:e}}),e?s().get(e):s().get()}catch(t){a.V.errorWithOperationalEvent({action:"usedGetCookieError",attributes:{cookieKey:e},message:"Failed to use get cookie. ".concat(t.message||"")})}}},"./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebClient.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>rI});var i=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("./node_modules/@atlassiansox/analytics-web-client/node_modules/uuid/v4.js"),n=r.n(s),o=r("./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebTypes.js");class a{constructor(){(0,i.A)(this,"_bindEventListeners",()=>{document.addEventListener(this._visibilityChange,this._handleVisibilityChange,!1)}),(0,i.A)(this,"_handleVisibilityChange",()=>{let e=document[this._hidden];this._isHidden=e,this._callbacks.forEach(t=>t(e))}),this._isHidden=!1,this._callbacks=new Map,this._hidden=void 0,this._visibilityChange=void 0,"undefined"!=typeof document&&(void 0!==document.hidden?(this._isHidden=document.hidden,this._hidden="hidden",this._visibilityChange="visibilitychange"):void 0!==document.msHidden?(this._isHidden=document.msHidden,this._hidden="msHidden",this._visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this._isHidden=document.webkitHidden,this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==this._hidden&&this._bindEventListeners())}addCallback(e,t){if("string"!=typeof e)throw Error("Invalid name, must be string");if("function"!=typeof t)throw Error("Invalid callback, must be function");this._callbacks.set(e,t)}removeCallback(e){this._callbacks.has(e)&&this._callbacks.delete(e)}getIsHidden(){return this._isHidden}}class l{constructor(){this._performance=window.performance}clearMarks(...e){this._performance&&this._performance.clearMarks&&this._performance.clearMarks(...e)}mark(...e){this._performance&&this._performance.mark&&this._performance.mark(...e)}getEntriesByName(...e){return this._performance&&this._performance.getEntriesByName?this._performance.getEntriesByName(...e):[]}getTimeOrigin(){return this._performance&&(this._performance.timeOrigin||this._performance.timing)?this._performance.timeOrigin||this._performance.timing.navigationStart:0}now(){return this._performance&&this._performance.now?this._performance.now():Date.now?Date.now():+new Date}isAvailable(){return!!this._performance&&!!this._performance.clearMarks&&!!this._performance.mark&&!!this._performance.getEntriesByName&&!!this._performance.timing}}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class d{constructor(e,t){if((0,i.A)(this,"_getEventKey",({task:e,taskId:t})=>t?`${e}.${t}`:e),(0,i.A)(this,"_getEventTimingByName",e=>{let t=this._performance.getEntriesByName(e);return t[t.length-1]}),(0,i.A)(this,"_getApdexFields",e=>{let t=this._getApdexTimings(e),r=this._calculateApdex({duration:t.duration,threshold:e.threshold});return u(u({},t),{},{apdex:r})}),(0,i.A)(this,"_getApdexTimings",e=>{let t=this._getEventKey(e),r=`${t}-start`,i=e.startTime||this._getStartTime(e,r),s=e.stopTime||this._getStopTime();return this._cleanApdexState(t),{startTime:i,stopTime:s,duration:s-i}}),(0,i.A)(this,"_getStartTime",(e,t)=>{let r=this._performance.getTimeOrigin();return e.type===o.LR.INITIAL_LOAD?r:r+this._getEventTimingByName(t).startTime}),(0,i.A)(this,"_getStopTime",()=>this._performance.getTimeOrigin()+this._performance.now()),(0,i.A)(this,"_cleanApdexState",e=>{this._performance.clearMarks(`${e}-start`),this._performance.clearMarks(`${e}-stop`),this._startedEvents.delete(e)}),(0,i.A)(this,"_getVisibilityFields",e=>{let t;if(e.type===o.LR.INITIAL_LOAD)t=!this._wasPreviouslyHidden;else if(e.type===o.LR.TRANSITION){let r=this._getEventKey(e);t=this._isActiveEvents.get(r)}return(e.startTime||e.stopTime)&&(t=!this._pageVisibility.getIsHidden()),{isActiveTab:t}}),(0,i.A)(this,"_calculateApdex",({duration:e,threshold:t=this._threshold})=>e<=t?1:e<=4*t?.5:0),(0,i.A)(this,"_validateStartEvent",e=>{if(!e)throw Error('Missing "event" in Apdex start event');if(!e.task)throw Error('Missing "task" in Apdex start event');if("string"!=typeof e.task)throw Error('Invalid "task" in Apdex start event');if(e.taskId&&"string"!=typeof e.taskId)throw Error('Invalid "taskId" in Apdex start event')}),(0,i.A)(this,"_validateStopEvent",e=>{if(!e)throw Error('Missing "event" in Apdex stop event');if(!e.task)throw Error('Missing "task" in Apdex stop event');if("string"!=typeof e.task)throw Error('Invalid "task" in Apdex stop event');if(e.taskId&&"string"!=typeof e.taskId)throw Error('Invalid "taskId" in Apdex stop event');if(!e.type)throw Error('Missing "type" in Apdex stop event');if(e.type&&!(0,o.Xj)(o.LR,e.type))throw Error('Invalid "type" in Apdex stop event');if(e.threshold&&"number"!=typeof e.threshold)throw Error('Invalid "threshold" in Apdex stop event');if(!e.startTime&&e.type===o.LR.TRANSITION){let t=this._getEventKey(e);if(!this._startedEvents.has(t))throw Error(`Apdex event transition "${t}" was not started`)}if(e.startTime&&!("number"==typeof e.startTime&&e.startTime>=0))throw Error('Invalid "startTime" in Apdex stop event');if(e.stopTime&&"number"!=typeof e.stopTime)throw Error('Invalid "stopTime" in Apdex stop event');if(e.stopTime<=e.startTime)throw Error('"stopTime" should be greater than "startTime" in Apdex stop event')}),(0,i.A)(this,"_shouldSendEvent",e=>!!e&&"number"==typeof e.apdex),(0,i.A)(this,"_sendEvent",(e,t)=>{this._shouldSendEvent(e)&&this._onEvent({source:"ui",action:"readyForUser",actionSubject:"ui",attributes:u(u({},e.additionalAttributes),{},{task:e.task,taskId:e.taskId,type:e.type,threshold:e.threshold||this._threshold,apdex:e.apdex,startTime:e.startTime,stopTime:e.stopTime,duration:e.duration,isActiveTab:e.isActiveTab})},t)}),!e)throw Error("Missing onEvent callback");if("function"!=typeof e)throw Error("Invalid onEvent, must be function");if(!(t instanceof a))throw Error("Invalid pageVisibility, must be PageVisibility class");this._startedEvents=new Map,this._performance=new l,this._onEvent=e,this._threshold=1e3,this._wasPreviouslyHidden=t.getIsHidden(),this._isActiveEvents=new Map,this._pageVisibility=t,this._pageVisibility.addCallback("apdexEvent",e=>{this.onVisibilityChange(!e)})}start(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;let t=this._getEventKey(e),r=`${t}-start`;this._startedEvents.set(t,!0),this._isActiveEvents.set(t,!this._pageVisibility.getIsHidden()),this._performance.clearMarks(r),this._performance.mark(r)}getStart(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;let t=this._getEventKey(e),r=`${t}-start`;return this._getEventTimingByName(r)}stop(e,t){if(this._validateStopEvent(e),!this._performance.isAvailable())return;let r=this._getApdexFields(e),i=this._getVisibilityFields(e);this._sendEvent(u(u(u({},e),r),i),t)}onVisibilityChange(e){e||(this._wasPreviouslyHidden=!0,Array.from(this._isActiveEvents.keys()).forEach(e=>this._isActiveEvents.set(e,!1)))}}let p=e=>"function"==typeof e,h=(e,t)=>()=>{if(p(e))try{return e()}catch(e){console.error(`${t} - ${e instanceof Error?e.message:String(e)}`);return}return e};function m(e){return!0==(null!==e&&"object"==typeof e&&!1===Array.isArray(e))&&"[object Object]"===Object.prototype.toString.call(e)}function f(e){if(!1===m(e))return!1;let t=e.constructor;if("function"!=typeof t)return!1;let r=t.prototype;return!1!==m(r)&&"isPrototypeOf"in r}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b(e){return{tenantIdType:e.tenantIdType,tenantId:e.tenantId}}function v(e){return{userIdType:e.userIdType}}function C(e){return{orgId:e.orgId}}function w(e){return{workspaceId:e.workspaceId}}function _(e){if(S(e))return{aliases:e}}function O(e){if(S(e))return{groups:e}}function I(e){return e.anonymousId?{anonymousId:e.anonymousId}:{}}function E(e,t){return void 0===t?e:t}function A(e,t){let r=t||{},i=E(e.env,r.env),s=E(e.product,r.product),n=E(e.subproduct(),r.subproduct);return{env:i,product:s,subproduct:n,version:E(e.version,r.version),origin:E(e.origin,r.origin),platform:E(e.platform,r.platform)}}function S(e){return f(e)&&Object.keys(e).length>0}function k(e,t){return S(t)?{[e]:t}:void 0}function j(e){if(S(e))return k("containers",function(e){let t={};return Object.keys(e).forEach(r=>{let i=e[r];t[r]={id:i.id,type:i.type}}),t}(e))}function T(e,t){return y({containerType:e.containerType,containerId:e.containerId,source:e.source,objectType:e.objectType,objectId:e.objectId,actionSubject:e.actionSubject,action:e.action,actionSubjectId:e.actionSubjectId,attributes:e.attributes,nonPrivacySafeAttributes:e.nonPrivacySafeAttributes,tags:e.tags,highPriority:e.highPriority,eventType:t},j(e.containers))}function P(e){return`${e.actionSubject} ${e.action}`}function x(e,t,r,i,s,n,o,a,l,c,u,d,p){let h=A(e,function(e){let{env:t,product:r,subproduct:i,version:s,origin:n,platform:o}=e;return{env:t,product:r,subproduct:i,version:s,origin:n,platform:o}}(i)),m=b(t),f=C(l),g=w(u),E=v(r),S=T(i,s);return y(y(y(y(y(y(y(y(y({},h),m),f),E),S),I(i)),{},{tabId:n,sessionId:o,taskSessions:a,pageLoadId:c},g),_(d)),O(p))}let D=1e4,N=(e,t)=>Object.keys(e).reduce((r,i)=>(r[t(e[i],i,e)]=e[i],r),{}),R=(e,t)=>t.reduce((t,r)=>(r in e&&(t[r]=e[r]),t),{}),L=(e,t)=>Object.keys(e).filter(r=>!t(e[r],r)).reduce((t,r)=>(t[r]=e[r],t),{}),M=(e,t)=>Object.keys(e).filter(r=>t(e[r],r)).reduce((t,r)=>(t[r]=e[r],t),{}),F=(e,t)=>Object.keys(e).filter(e=>0>t.indexOf(e)).reduce((t,r)=>(t[r]=e[r],t),{}),U=(e,t)=>{if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(!e||!t||"object"!=typeof e&&"object"!=typeof t)return e===t;if(e.prototype!==t.prototype)return!1;let r=Object.keys(e);return r.length===Object.keys(t).length&&r.every(r=>U(e[r],t[r]))},B=(e,t)=>e.reduce((e,r,i,s)=>(e[t(r,i,s)?0:1].push(r),e),[[],[]]),$=Object.freeze([o.$q.OPERATIONAL,o.$q.TRACK,o.$q.UI]);function q(e){if(e){if(e&&e.constructor!==Object)throw Error("properties.containers must be an Object");Object.values(e).forEach(e=>(function(e){if(!f(e))throw Error("properties.containers must be an Object");if(!("id"in e))throw Error("properties.containers is missing field 'id'");if("string"!=typeof e.id)throw Error("properties.containers.id must be of type String");if("type"in e&&"string"!=typeof e.type)throw Error("properties.containers.type must be of type String")})(e))}}function V(e){switch(e){case o.$q.OPERATIONAL:case o.$q.TRACK:case o.$q.UI:return!0;default:return!1}}function W(e){if(!e)throw Error("Missing event");if(!e.source)throw Error("Missing event.source");if(!e.actionSubject)throw Error("Missing event.actionSubject");if(!e.action)throw Error("Missing event.action");q(e.containers)}class z{constructor(e,t){if((0,i.A)(this,"canCompress",e=>{try{return e&&V(e.eventType)&&this.predicate(e)}catch(e){return!1}}),(0,i.A)(this,"compress",e=>{let[t,r]=B(e,e=>this.canCompress(e)),i=this.compressFn(t);if(!i)throw Error("No events were returned from the compression function");return i.forEach(e=>{(function(e){if(!V(e))throw Error(`Invalid action event type: ${e}, must be one of: [${$}]`)})(e.eventType),W(e)}),i.concat(r)}),"function"!=typeof e)throw Error("Invalid predicate, must be a function that accepts an event and returns a boolean");if("function"!=typeof t)throw Error("Invalid compressFn, must be a function that both accepts and returns an array of events");this.predicate=e,this.compressFn=t}}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class G{constructor(e=[]){if((0,i.A)(this,"canCompress",e=>this.compressionRules.some(t=>t.canCompress(e))),(0,i.A)(this,"compress",e=>this.createGroups(e).reduce((e,t)=>{let r=this.compressGroup(t);return e.concat(r)},[])),(0,i.A)(this,"createGroups",e=>e.reduce((e,t)=>{let r;let i=this.compressionRules.find(e=>e.canCompress(t));if(i){let e=T(t,t.eventType);r=F(t,Object.keys(e))}let s=e.find(e=>i===e.compressor&&U(r,e.contextFields));return s?s.events.push(t):e.push({contextFields:r,compressor:i,events:[t]}),e},[])),(0,i.A)(this,"compressGroup",e=>{if(!e.compressor)return e.events;try{return e.compressor.compress(e.events).map(t=>K(K({},t),e.contextFields))}catch(t){return console.warn(`Failed to compress some analytics events. Error: ${t.message}. Sending ${e.events.length} uncompressed events instead`),e.events}}),!Array.isArray(e))throw Error("Event compressors must be constructed with an array of CompressionRules");if(!e.every(e=>e instanceof z))throw Error("Event compressors can only be constructed with instances of CompressionRule");this.compressionRules=e}}class Q{constructor(e,t){(0,i.A)(this,"push",(e,t,r,i)=>{this.eventArgs.push({identifier:e,builtEvent:t,context:r,userInfo:i})}),(0,i.A)(this,"size",()=>this.eventArgs.length),(0,i.A)(this,"startFlush",()=>{try{this.eventArgs=this.compressEventArgs(this.eventArgs)}catch(e){console.warn(`Failed to perform compression on the delayed analytics events. Error: ${e.message}. Sending ${this.eventArgs.length} uncompressed events instead`)}this.flushNextBatch()}),(0,i.A)(this,"cancelFlush",()=>{this.flushBatchTimeout&&(clearTimeout(this.flushBatchTimeout),this.flushBatchTimeout=null)}),(0,i.A)(this,"flushNextBatch",()=>{this.eventArgs.splice(0,7).forEach(e=>this.processFn(e.identifier,e.builtEvent,e.context,e.userInfo)),this.eventArgs.length>0?this.flushBatchTimeout=setTimeout(()=>this.flushNextBatch(),100):this.flushBatchTimeout=null}),(0,i.A)(this,"compressEventArgs",e=>{let[t,r]=B(e,e=>this.compressor.canCompress(e.builtEvent)),i=t.reduce((e,t)=>{let r=e.find(e=>U(e.userInfo,t.userInfo)&&U(e.context,t.context));return r?r.eventArgs.push(t):e.push({userInfo:t.userInfo,context:t.context,eventArgs:[t]}),e},[]).reduce((e,t)=>{try{let r=t.eventArgs.map(e=>e.builtEvent),i=this.compressor.compress(r).map(e=>({identifier:P(e),builtEvent:e,userInfo:t.userInfo,context:t.context}));return e.concat(i)}catch(e){return console.warn(`Failed to compress some analytics events. Error: ${e.message}. Sending ${t.eventArgs.length} uncompressed events instead`),t.eventArgs}},[]);return r.forEach(e=>i.push(e)),i}),this.processFn=e,this.flushBatchTimeout=null,this.eventArgs=[],this.compressor=new G(t)}}let J=function(e){return e.TIMEOUT="timeout",e.MANUAL="manual",e}({});class X{constructor(e,t){(0,i.A)(this,"push",(e,t,r,i)=>{this.delayQueue.push(e,t,r,i)}),(0,i.A)(this,"startLowPriorityEventDelay",(e=D,t)=>{if(Number.isNaN(e)||e<=0)throw Error(`Invalid timeout period: ${e}, must be a number greater than 0`);this.delayTimeout&&clearTimeout(this.delayTimeout);let r=e?Math.min(e,3e4):3e4;this.delayCallback=t,this.delayTimeout=setTimeout(()=>this.stopLowPriorityEventDelay(J.TIMEOUT),r),this.delayQueue.cancelFlush(),this.isDelaying=!0}),(0,i.A)(this,"stopLowPriorityEventDelay",(e=J.MANUAL)=>{var t;this.delayTimeout&&(clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.delayQueue.startFlush(),this.isDelaying=!1,null===(t=this.delayCallback)||void 0===t||t.call(this,e),this.delayCallback=void 0}),(0,i.A)(this,"isDelayingLowPriorityEvents",()=>this.isDelaying),this.isDelaying=!1,this.delayQueue=new Q(e,t)}}let Y=function(e){return e.IN_PROGRESS="inProgress",e.QUEUE="queue",e.RECLAIM_START="reclaimStart",e.RECLAIM_END="reclaimEnd",e.ACK="ack",e}({}),Z=function(e){return e[e.RECLAIM_TIMEOUT=1e4]="RECLAIM_TIMEOUT",e[e.RECLAIM_WAIT=500]="RECLAIM_WAIT",e[e.RECLAIM_WAIT_THRESHOLD=2e3]="RECLAIM_WAIT_THRESHOLD",e}({}),ee=(e,t)=>({[Y.ACK]:`${e}.${t}.${Y.ACK}`,[Y.QUEUE]:`${e}.${t}.${Y.QUEUE}`,[Y.IN_PROGRESS]:`${e}.${t}.${Y.IN_PROGRESS}`,[Y.RECLAIM_START]:`${e}.${t}.${Y.RECLAIM_START}`,[Y.RECLAIM_END]:`${e}.${t}.${Y.RECLAIM_END}`}),et=Object.values(Y),er=e=>{if("string"!=typeof e||0===e.length)return 0;try{let t=Object.keys(localStorage).filter(t=>t&&t.startsWith(`${e}.`)||!1).map(e=>e.split(".")).filter(e=>3===e.length&&et.includes(e[2])).reduce((e,t)=>{let[,r,i]=t;return void 0===e[r]&&(e[r]={}),e[r][i]=!0,e},{}),r=Object.keys(t).filter(e=>!0!==t[e][Y.ACK]);return r.forEach(t=>{let{queue:r,inProgress:i,reclaimStart:s,reclaimEnd:n}=ee(e,t);localStorage.removeItem(i),localStorage.removeItem(r),localStorage.removeItem(s),localStorage.removeItem(n)}),r.length}catch(e){}return 0};function ei(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function es(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ei(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let en=e=>new Promise(t=>{setTimeout(t,e)}),eo=e=>{try{return Object.keys(localStorage).filter(t=>t.startsWith(e)).map(e=>e.split(".")).filter(t=>{if(3===t.length&&t[0]===e&&t[2]===Y.ACK)try{let e=localStorage.getItem(t.join("."));if(e){let t=parseInt(e);return Z.RECLAIM_TIMEOUT+t<Date.now()}}catch(e){}return!1}).map(e=>e[1])}catch(e){}return[]},ea=async(e,t)=>{let{ack:r,reclaimStart:i,reclaimEnd:s}=e.storageKeys,n=Date.now();if(localStorage.setItem(i,e.reclaimProcessId),localStorage.setItem(r,n.toString()),await en(Z.RECLAIM_WAIT),Date.now()>n+Z.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(i)!==e.reclaimProcessId)throw Error("Took to long to callback, reclaim abandonded. After reclaimStart.");if(localStorage.setItem(s,e.reclaimProcessId),await en(Z.RECLAIM_WAIT),Date.now()>n+Z.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(i)!==e.reclaimProcessId||localStorage.getItem(s)!==e.reclaimProcessId)throw Error("Took to long to callback, reclaim abandonded. After reclaimEnd.");return el(e,t)},el=async(e,t)=>{let{queue:r,inProgress:i}=e.storageKeys,s=[...JSON.parse(localStorage.getItem(r)||"[]"),...Object.entries(JSON.parse(localStorage.getItem(i)||"{}")).map(([e,t])=>es(es({},t),{},{attemptNumber:t.attemptNumber+1,id:e}))];if(s.length>0){let n=await t(s);if("successful"===n.status)ec(e.storageKeys);else if("partial"===n.status){let e=s.filter(e=>!n.acceptedItemIds.includes(e.id));return localStorage.removeItem(i),localStorage.setItem(r,JSON.stringify(e)),{fullReclaim:!1}}}else ec(e.storageKeys);return{fullReclaim:!0}},ec=e=>{localStorage.removeItem(e.queue),localStorage.removeItem(e.inProgress),localStorage.removeItem(e.reclaimEnd),localStorage.removeItem(e.reclaimStart),localStorage.removeItem(e.ack)},eu=async(e,t)=>{if("string"!=typeof e||0===e.length)return{fullReclaims:0,partialReclaims:0,failedReclaims:0};let r=n()(),i=eo(e).map(i=>ea({queuePrefix:e,reclaimProcessId:r,storageKeys:ee(e,i)},t)),s=await Promise.allSettled(i),o=s.filter(e=>"rejected"===e.status),a=s.filter(e=>"fulfilled"===e.status).map(e=>e.value),l=a.filter(e=>e.fullReclaim),c=a.filter(e=>!e.fullReclaim);return{failedReclaims:o.length,partialReclaims:c.length,fullReclaims:l.length}},ed="namespace-timeAdded",ep="analytics-resilience",eh="timeToBeProcessedAfter",em="timeAdded",ef="retryAttempts",eg=function(e){return e.INDEXEDDB="indexeddb",e.MEMORY="memory",e}({}),ey=function(e){return e.IGNORE="ignore",e.ABANDON="abandon",e.EVICT="evict",e}({});class eb extends Error{constructor(){super("window.indexeddb is undefined."),Object.setPrototypeOf(this,eb.prototype),this.name="NoIndexedDbError"}}let ev="AbandonWriteError";class eC extends Error{constructor(e){super(`Event Limit reached. Abandoning write to: ${e}`),Object.setPrototypeOf(this,eC.prototype),this.name=ev}}let ew="CallbackProcessingError";class e_ extends Error{constructor(e){super(`Error thrown while processing events in callback: ${e&&"object"==typeof e&&"toString"in e&&"function"==typeof e.toString&&e.toString()||"string"==typeof e&&e||"Argument passed to CallbackProcessingError was not an Error or string."}`),Object.setPrototypeOf(this,e_.prototype),this.name=ew}}let eO="InvalidPolicyError";class eI extends Error{constructor(e,t){super(`Method '${t}' cannot be called with policy '${e}'.`),this.name=eO}}let eE=e=>!!e&&"object"==typeof e&&"name"in e&&"string"==typeof e.name&&(e.name===ev||e.name===ew||e.name===eO);var eA=r("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");let eS=7,ek=(e,t,{id:r,retryAttempts:i,timeToProcessOffset:s})=>({item:e,id:r||n()(),retryAttempts:i||0,timeToBeProcessedAfter:Date.now()+(s||0),namespace:t,timeAdded:Date.now()}),ej=e=>({logger:e.logger||console,useMemory:e.useMemory||!1,maxAttempts:e.maxAttempts||10,maxEventLimit:e.maxEventLimit||5e3}),eT=e=>new Promise((t,r)=>{e.onsuccess=e=>{t(e)},e.onerror=e=>{r(e)}}),eP=e=>new Promise((t,r)=>{e.oncomplete=()=>{t()},e.onerror=e=>{r(e)},e.onabort=e=>{r(e)}}),ex=(e,t)=>{try{"function"==typeof e.commit&&e.commit()}catch(e){throw t.error("Failed to force commit transaction:",e),e}return eP(e)},eD=(e,t)=>{e.onerror=e=>{t.warn("Error thrown from request:",e)}};class eN{constructor(e,t,r,s){if((0,i.A)(this,"deleteOldestNEvents",async(e,t)=>{var r;let i=e.index(ed),s=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),n=i.getAllKeys(s,t),o=await eT(n),a=null==o||null===(r=o.target)||void 0===r?void 0:r.result;if(a&&Array.isArray(a)&&a.length>0)try{let t=a.map(t=>this.deleteItemHandler(e,t));await Promise.all(t)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}}),e>0)this.eventLimit=e;else throw Error("Event Limit has to be set higher than 1");this.namespace=t,this.logger=r,this.deleteItemHandler=s}async insertItems(e,t,r=ey.ABANDON){let i=[...t],s=0;switch(r){case ey.ABANDON:await this.throwIfNotEnoughSpace(e,t.length);break;case ey.EVICT:s=await this.evictIfNotEnoughSpace(e,t.length);break;case ey.IGNORE:await this.calculateHowManyEventsWeCanAdd(e,i)}let n=i.map(t=>eT(e.add(t)));return await Promise.all(n),await ex(e.transaction,this.logger),{items:i,numberOfEvictedItems:s}}async throwIfNotEnoughSpace(e,t){let r=await this.calculateFreeSpace(e);if(r<t)throw new eC(`Not enough space in IndexedDb. Needed ${t} but only had ${r}`)}async evictIfNotEnoughSpace(e,t){let r=await this.calculateFreeSpace(e);if(r<t){let i=t-r;return await this.deleteOldestNEvents(e,i),i}return 0}async calculateHowManyEventsWeCanAdd(e,t){let r=await this.calculateFreeSpace(e);if(r<t.length){let e=t.length-r,i=t.length-e;t.splice(i,e)}}async calculateFreeSpace(e){let t=await this.getCountofEventsInObjectStore(e);return this.eventLimit-t}async getCountofEventsInObjectStore(e){let t=e.index(ed),r=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),i=t.count(r);return(await eT(i)).target.result}}let eR=["item"],eL=["items"];function eM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}class eF{constructor(e,t={}){if((0,i.A)(this,"startDB",async()=>new Promise(async(e,t)=>{if("undefined"!=typeof window){let r=window.setTimeout(()=>{this.logger.warn("IndexedDB timed out."),t(new eb)},15e3),i=window.indexedDB.open("analytics-web-client",1);i.onupgradeneeded=e=>{if(0!==e.oldVersion)throw Error("We cannot upgrade the database. Do not do this.");let t=i.result.createObjectStore(ep,{keyPath:"id"});t.createIndex(eh,eh,{unique:!1}),t.createIndex(ef,ef,{unique:!1}),t.createIndex(em,em,{unique:!1}),t.createIndex(ed,["namespace","timeAdded"],{unique:!1})};try{return await eT(i),e(i.result)}catch(e){this.logger.warn("IndexedDB failed to initialise.",e),t(new eb)}finally{window.clearTimeout(r)}}else this.logger.warn("IndexedDB failed to initialise. No 'window' object."),t(new eb)})),(0,i.A)(this,"addItem",async(e,t={},r=ey.ABANDON)=>{let{logger:i,namespace:s}=this,n=ek(e,s,t),{objectStore:o}=await this.getObjectStoreAndTransaction("readwrite");if(r===ey.IGNORE)throw new eI(r,"IndexedDbConnector#addItem");try{if(!n.namespace||0===n.namespace.length||"string"!=typeof n.namespace)throw Error("Namespace not specified");let e=await this.globalEventLimitGuard.insertItems(o,[n],r);if(1===e.items.length)return{item:e.items[0],numberOfEvictedItems:e.numberOfEvictedItems};throw Error(`Incorrect number of items added. Expected: 1, got: ${e.items.length}`)}catch(e){if(eE(e))throw e;throw i.log("Failed to add item to table",e),Error("Request to add item to table failed")}}),(0,i.A)(this,"bulkAddItem",async(e,t=ey.ABANDON)=>{let{logger:r,namespace:i}=this,s=e.map(e=>{let{item:t}=e;return ek(t,i,(0,eA.A)(e,eR))}),{objectStore:n}=await this.getObjectStoreAndTransaction("readwrite");try{return await this.globalEventLimitGuard.insertItems(n,s,t)}catch(e){if(eE(e))throw e;throw r.log("Failed to add item to table",e),Error("Request to add item to table failed")}}),(0,i.A)(this,"getItems",async(e=eS)=>{let t=e>0?e:eS,{logger:r}=this,s=this.options.maxAttempts,{transaction:n,objectStore:o}=await this.getObjectStoreAndTransaction("readwrite"),a=o.index(eh),l=IDBKeyRange.upperBound(Date.now()),c=a.openCursor(l),u=await new Promise(async(e,n)=>{let o=[],a=0;c.onerror=e=>{r.error("Failed to open cursor:",e),n("Failed to open cursor")},c.onsuccess=n=>{let l=n.target.result;if(l){let n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eM(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},l.value);o.push(n);let c=l.value;c.retryAttempts+=1,c.timeToBeProcessedAfter=Date.now()+6e4,c.retryAttempts>=s?(++a,eD(l.delete(),r)):eD(l.update(c),r),o.length<t?l.continue():e({items:o,numberOfDeletedItems:a})}else e({items:o,numberOfDeletedItems:a})}});return await ex(n,this.logger),u}),(0,i.A)(this,"deleteItems",async e=>{let{transaction:t,objectStore:r}=await this.getObjectStoreAndTransaction("readwrite");try{let i=e.map(e=>this.deleteItem(r,e));await ex(t,this.logger),await Promise.all(i)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}}),(0,i.A)(this,"getItemCount",async()=>{let{transaction:e,objectStore:t}=await this.getObjectStoreAndTransaction("readonly"),r=t.index(eh),i=IDBKeyRange.upperBound(Date.now()),s=r.count(i),n=await eT(s);return await ex(e,this.logger),n.target.result}),(0,i.A)(this,"processItems",async(e,t=eS)=>{let r=await this.getItems(t),{items:i}=r,s=(0,eA.A)(r,eL);try{let t=await e(i,s),r=i.map(e=>e.id);return await this.deleteItems(r),t}catch(e){throw new e_(e)}}),(0,i.A)(this,"deleteItem",async(e,t)=>{let{logger:r}=this;try{await eT(e.delete(t))}catch(e){throw r.error("Failed to delete item:",t,e),e}}),(0,i.A)(this,"getObjectStoreAndTransaction",async e=>{let t=(await this.db).transaction(ep,e),r=t.objectStore(ep);return{transaction:t,objectStore:r}}),this.options=ej(t),this.namespace=e,this.logger=this.options.logger,!window.indexedDB)throw new eb;this.db=this.startDB(),this.db.catch(()=>{}),this.globalEventLimitGuard=new eN(this.options.maxEventLimit,this.namespace,this.logger,this.deleteItem)}storeType(){return eg.INDEXEDDB}}class eU{constructor(e,t){if((0,i.A)(this,"insertItemsToMemoryStore",(e,t)=>{switch(t){case ey.ABANDON:return this.handleAbandonIfLimitWillExceedPolicy(e);case ey.EVICT:return Promise.resolve(this.handleEvictOldestIfLimitExceededPolicy(e));case ey.IGNORE:return this.handleAddAsManyAsPossible(e)}}),e>0)this.eventLimit=e;else throw Error("Event Limit has to be set higher than 1");this.memoryItemHandlers=t}async handleAbandonIfLimitWillExceedPolicy(e){if(await this.memoryItemHandlers.getItemCount()+e.length>this.eventLimit)throw new eC(eg.MEMORY);return this.memoryItemHandlers.addItems(e),{items:e,numberOfEvictedItems:0}}handleEvictOldestIfLimitExceededPolicy(e){return this.memoryItemHandlers.addItems(e),{items:e,numberOfEvictedItems:this.memoryItemHandlers.evictEventsIfNeeded(this.eventLimit)}}async handleAddAsManyAsPossible(e){let t=this.eventLimit-await this.memoryItemHandlers.getItemCount(),r=t>e.length?e:e.slice(0,t);return this.memoryItemHandlers.addItems(r),{items:r,numberOfEvictedItems:0}}}let eB=["item"],e$=["items"];function eq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}class eV{constructor(e,t={}){this.namespace=e,this.memoryStore=[],this.options=ej(t),this.globalEventLimitGuard=new eU(this.options.maxEventLimit,{addItems:this.addItems.bind(this),getItemCount:this.getItemCount.bind(this),evictEventsIfNeeded:this.evictEventsIfNeeded.bind(this)})}async addItem(e,t={},r=ey.ABANDON){if(r===ey.IGNORE)throw new eI(r,"IndexedDbConnector#addItem");let i=ek(e,this.namespace,t),s=await this.globalEventLimitGuard.insertItemsToMemoryStore([i],r);return Promise.resolve({item:s.items[0],numberOfEvictedItems:s.numberOfEvictedItems})}bulkAddItem(e,t=ey.ABANDON){let r=e.map(e=>{let{item:t}=e,r=(0,eA.A)(e,eB);return ek(t,this.namespace,r)});return this.bulkAddItemWrapperType(r,t)}bulkAddItemWrapperType(e,t=ey.ABANDON){return Promise.resolve(this.globalEventLimitGuard.insertItemsToMemoryStore(e,t))}getItems(e=eS){return Promise.resolve(this.synchronousGetItems(e))}synchronousGetItems(e=eS){let t=e>0?e:eS,r=Date.now(),s=[],n=[];for(let e of this.memoryStore)if(e.timeToBeProcessedAfter<=r&&(s.push(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eq(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e)),e.timeToBeProcessedAfter+=6e4,e.retryAttempts+=1,e.retryAttempts>=this.options.maxAttempts&&n.push(e)),s.length>=t)break;return n.forEach(e=>{let t=this.memoryStore.indexOf(e);this.memoryStore.splice(t,1)}),{items:s,numberOfDeletedItems:n.length}}deleteItems(e){return this.memoryStore=this.memoryStore.filter(t=>!e.includes(t.id)),Promise.resolve(void 0)}getItemCount(){let e=Date.now();return Promise.resolve(this.memoryStore.filter(t=>t.timeToBeProcessedAfter<=e).length)}async processItems(e,t){let r=this.synchronousGetItems(t),{items:i}=r,s=(0,eA.A)(r,e$),n=i.map(e=>e.id);try{let t=await e(i,s);return await this.deleteItems(n),t}catch(e){throw new e_(e)}}storeType(){return eg.MEMORY}addItems(e){this.memoryStore.push(...e),this.memoryStore.sort(function(e,t){return e.timeAdded-t.timeAdded})}evictEventsIfNeeded(e){let t=this.memoryStore.length;if(t>e){let r=t-e;return this.memoryStore.splice(0,r),r}return 0}}let eW=class{constructor(e,t={}){if(this.namespace=e,this.options=ej(t),!e||0===e.length||"string"!=typeof e)throw Error("Invalid namespace provided");this.resilience=this.getResilienceMechanism(e,t)}getResilienceMechanism(e,t){if(!t.useMemory)try{return new eF(e,t)}catch(e){if(!(e instanceof eb)){var r;null===(r=t.logger)||void 0===r||r.warn("Attempted to create IndexedDbResilience but failed. Using memory instead.")}}return new eV(this.namespace,t)}addItem(e,t,r=ey.ABANDON){return this.runOrFailOver(()=>this.resilience.addItem(e,t,r))}bulkAddItem(e,t=ey.ABANDON){return this.runOrFailOver(()=>this.resilience.bulkAddItem(e,t))}getItems(e){return this.runOrFailOver(()=>this.resilience.getItems(e))}deleteItems(e){return this.runOrFailOver(()=>this.resilience.deleteItems(e))}getItemCount(){return this.runOrFailOver(()=>this.resilience.getItemCount())}processItems(e,t){return this.runOrFailOver(()=>this.resilience.processItems(e,t))}storeType(){return this.resilience.storeType()}async runOrFailOver(e){try{return await e()}catch(t){if(eE(t))throw t;return this.resilience.storeType()===eg.INDEXEDDB&&await this.failOver(),e()}}async failOver(){let e=this.resilience,t=new eV(this.namespace,this.options);this.resilience=t;try{let{items:r}=await e.getItems(this.options.maxEventLimit);if(r.length>0){let i=(await t.bulkAddItemWrapperType(r,ey.IGNORE)).items.map(e=>e.id);await e.deleteItems(i)}}catch(e){this.options.logger.warn("Unexpected error from ResilienceDb, switching to MemoryDb")}}},ez=function(e){return e.INDEXEDDB="indexeddb",e.MEMORY="memory",e}({}),eH=function(e){return e[e.ONLINE=0]="ONLINE",e[e.OFFLINE=1]="OFFLINE",e}({});class eK{constructor(){(0,i.A)(this,"itemsDiscardedByRetry",0),(0,i.A)(this,"eventCount",0),(0,i.A)(this,"itemsDiscardedByOverflow",0),(0,i.A)(this,"resilienceMechanism",ez.INDEXEDDB),(0,i.A)(this,"localstorageNumberOfQueuesPurged",0),(0,i.A)(this,"localstorageNumberOfFullReclaims",0),(0,i.A)(this,"localstorageNumberOfPartialReclaims",0),(0,i.A)(this,"localstorageNumberOfFailedReclaims",0)}addToItemsDiscardedByRetryCounter(e=1){this.itemsDiscardedByRetry+=e}addToEventCount(){this.eventCount++}addToItemsDiscardedByOverflowCounter(e=1){this.itemsDiscardedByOverflow+=e}setResilienceMechanism(e){this.resilienceMechanism=e}addToReclaimMetrics(e){this.localstorageNumberOfFullReclaims+=e.fullReclaims,this.localstorageNumberOfPartialReclaims+=e.partialReclaims,this.localstorageNumberOfFailedReclaims+=e.failedReclaims}addToPurgedQueuesMetrics(e){this.localstorageNumberOfQueuesPurged+=e}subtractFromMetrics(e){this.itemsDiscardedByRetry=this.subtractFromCount(this.itemsDiscardedByRetry,e.itemsDiscardedByRetry),this.eventCount=this.subtractFromCount(this.eventCount,e.eventCount),this.itemsDiscardedByOverflow=this.subtractFromCount(this.itemsDiscardedByOverflow,e.itemsDiscardedByOverflow),this.localstorageNumberOfFullReclaims=this.subtractFromCount(this.localstorageNumberOfFullReclaims,e.fullReclaims),this.localstorageNumberOfPartialReclaims=this.subtractFromCount(this.localstorageNumberOfPartialReclaims,e.partialReclaims),this.localstorageNumberOfFailedReclaims=this.subtractFromCount(this.localstorageNumberOfFailedReclaims,e.failedReclaims),this.localstorageNumberOfQueuesPurged=this.subtractFromCount(this.localstorageNumberOfQueuesPurged,e.localstorageQueuesPurged)}subtractFromCount(e,t){return Math.max(e-(t||0),0)}getMetricsPayload(){return{itemsDiscardedByRetry:this.itemsDiscardedByRetry,eventCount:this.eventCount,itemsDiscardedByOverflow:this.itemsDiscardedByOverflow,resilienceMechanism:this.resilienceMechanism,localstorageQueuesPurged:this.localstorageNumberOfQueuesPurged,fullReclaims:this.localstorageNumberOfFullReclaims,partialReclaims:this.localstorageNumberOfPartialReclaims,failedReclaims:this.localstorageNumberOfFailedReclaims}}}let eG=null,eQ=()=>(eG||(eG=new eK),eG);class eJ{constructor(e){"undefined"!=typeof window&&(window.addEventListener("offline",()=>e(eH.OFFLINE)),window.addEventListener("online",()=>e(eH.ONLINE)))}getNetworkStatus(){return window.navigator.onLine?eH.ONLINE:eH.OFFLINE}}let eX=function(e){return e.IDLE="idle",e.RUNNING="running",e.COMPLETED="completed",e.TIMED_OUT="timedOut",e}({}),eY=function(e){return e.EXECUTE="execute",e.COMPLETE="complete",e.TIMEOUT="timeout",e}({});class eZ{constructor(e){if((0,i.A)(this,"timeoutHandle",void 0),(0,i.A)(this,"callbackStatus",eX.IDLE),e>0){this.timeoutPeriod=e;return}throw Error("CallbackWithTimeout requires timeout period higher than 0")}transitionCallbackStatus(e,t){switch(e){case eX.IDLE:case eX.TIMED_OUT:case eX.COMPLETED:t===eY.EXECUTE&&(this.callbackStatus=eX.RUNNING);break;case eX.RUNNING:switch(t){case eY.COMPLETE:this.callbackStatus=eX.COMPLETED;break;case eY.TIMEOUT:this.callbackStatus=eX.TIMED_OUT}break;default:this.callbackStatus=e}}executeCallbackWithTimeout(e,t,r){"undefined"!=typeof window&&(this.transitionCallbackStatus(this.callbackStatus,eY.EXECUTE),this.timeoutHandle=window.setTimeout(()=>{this.transitionCallbackStatus(this.callbackStatus,eY.TIMEOUT),r()},this.timeoutPeriod),e(e=>{this.cancelTimeout(),this.getCallbackStatus()!==eX.TIMED_OUT&&(this.transitionCallbackStatus(this.callbackStatus,eY.COMPLETE),t(e))}))}getCallbackStatus(){return this.callbackStatus}cancelTimeout(){"undefined"!=typeof window&&this.timeoutPeriod>0&&this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}}let e0=function(e){return e[e.NOOP=0]="NOOP",e[e.SUCCESS=1]="SUCCESS",e[e.ERROR=2]="ERROR",e}({}),e2={minRetryDelay:1e3,maxRetryDelay:3e4,backoffFactor:2,backoffJitterPercentage:0,waitInterval:500,callbackTimeoutPeriod:5e3},e1=function(e){return e[e.NONE=0]="NONE",e[e.IMMEDIATE=1]="IMMEDIATE",e[e.WAIT=2]="WAIT",e}({});class e3{constructor(e,t){(0,i.A)(this,"schedule",({immediate:e}={immediate:!1})=>{"undefined"!=typeof window&&(this.operationInFlight?e?this.queuedSchedule=e1.IMMEDIATE:this.queuedSchedule!==e1.IMMEDIATE&&(this.queuedSchedule=e1.WAIT):(e||this.options.waitInterval<=0)&&0===this.failureCount?(this.clearTimeout(),this.run()):this.failureCount>0&&null===this.scheduledTimeout?this.scheduledTimeout=window.setTimeout(this.run,this.calculateBackoff()):null===this.scheduledTimeout&&(this.scheduledTimeout=window.setTimeout(this.run,this.options.waitInterval)))}),(0,i.A)(this,"stop",()=>{this.clearTimeout(),this.queuedSchedule=e1.NONE}),(0,i.A)(this,"getFailureCount",()=>this.failureCount),(0,i.A)(this,"getCallbackStatus",()=>this.callbackTimer.getCallbackStatus()),(0,i.A)(this,"clearTimeout",()=>{"undefined"!=typeof window&&null!==this.scheduledTimeout&&(window.clearTimeout(this.scheduledTimeout),this.scheduledTimeout=null)}),(0,i.A)(this,"run",()=>{this.operationInFlight=!0,this.clearTimeout();try{this.callbackTimer.executeCallbackWithTimeout(this.callback,this.done,()=>this.done(e0.ERROR))}catch(e){this.done(e)}}),(0,i.A)(this,"done",e=>{this.operationInFlight=!1,e===e0.ERROR||this.callbackTimer.getCallbackStatus()===eX.TIMED_OUT?(this.failureCount++,this.clearTimeout()):e===e0.SUCCESS&&(this.failureCount=0),this.processQueuedSchedule()}),(0,i.A)(this,"processQueuedSchedule",()=>{if(this.queuedSchedule!==e1.NONE){let e=this.queuedSchedule===e1.IMMEDIATE;this.queuedSchedule=e1.NONE,this.schedule({immediate:e})}else this.failureCount>0&&this.schedule()}),(0,i.A)(this,"calculateBackoff",()=>{let{minRetryDelay:e,maxRetryDelay:t,backoffFactor:r,backoffJitterPercentage:i}=this.options,s=e*r**this.failureCount;if(i){let e=Math.random(),t=Math.floor(e*i*s);5>Math.floor(10*e)?s-=t:s+=t}return Number(Math.min(s,t).toPrecision(1))}),this.options={minRetryDelay:e.minRetryDelay||e2.minRetryDelay,maxRetryDelay:e.maxRetryDelay||e2.maxRetryDelay,backoffFactor:e.backoffFactor||e2.backoffFactor,backoffJitterPercentage:e.backoffJitterPercentage||e2.backoffJitterPercentage,waitInterval:void 0!==e.waitInterval?e.waitInterval:e2.waitInterval,callbackTimeoutPeriod:e.callbackTimeoutPeriod||e2.callbackTimeoutPeriod},this.scheduledTimeout=null,this.failureCount=0,this.callback=t,this.operationInFlight=!1,this.queuedSchedule=e1.NONE,this.callbackTimer=new eZ(this.options.callbackTimeoutPeriod)}}function e4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function e6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e4(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e4(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let e5={backoffFactor:0,backoffJitterPercentage:0,flushWaitMs:6e4,minRetryDelay:6e4,maxRetryDelay:6e4},e8={backoffFactor:2,backoffJitterPercentage:.2,batchFlushSize:7,flushBeforeUnload:!1,flushWaitMs:500,maxAttempts:10,maxItems:1e3,maxRetryDelay:3e4,minRetryDelay:1e3};class e9{constructor(e,t,r,i){this.queuePrefix=e,this.resilience=new eW(t,{logger:i,maxAttempts:null==r?void 0:r.maxAttempts,maxEventLimit:null==r?void 0:r.maxItems}),this.options=this.buildOptions(r),this.scheduler=new e3(e6(e6({},this.options),{},{waitInterval:null!=r&&r.flushBeforeUnload?0:this.options.flushWaitMs}),this.scheduleCallback.bind(this)),this.longPollingScheduler=new e3(e6(e6({},e5),{},{waitInterval:e5.flushWaitMs}),this.scheduleLongCallBack.bind(this)),this.metricsCollector=eQ(),this.networkStatus=new eJ(e=>{e===eH.OFFLINE?this.scheduler.stop():this.checkEventCountAndReschedule()})}start(e){this.batchFlushCallback=e,this.longPollingScheduler.schedule()}stop(){this.scheduler.stop(),this.longPollingScheduler.stop()}async addItem(e){let t=JSON.parse(JSON.stringify(e)),{numberOfEvictedItems:r}=await this.resilience.addItem(t,{},ey.EVICT);this.scheduler.schedule(),this.metricsCollector.addToEventCount(),r>0&&this.metricsCollector.addToItemsDiscardedByOverflowCounter(r)}getGlobalRetryCount(){return this.scheduler.getFailureCount()}async scheduleCallback(e){if(this.networkStatus.getNetworkStatus()===eH.OFFLINE){e(e0.NOOP);return}try{let t=await this.resilience.processItems(this.flush.bind(this),this.options.batchFlushSize);e(t)}catch(t){if(t.name===ew){e(e0.ERROR);return}}finally{await this.checkEventCountAndReschedule()}}async checkEventCountAndReschedule(){let e=await this.resilience.getItemCount();e>0&&this.scheduler.schedule({immediate:e>=this.options.batchFlushSize})}async scheduleLongCallBack(e){let t=er(this.queuePrefix);this.metricsCollector.addToPurgedQueuesMetrics(t);let r=await eu(this.queuePrefix,async e=>{let t=e.map(e=>({item:e.item,retryAttempts:e.attemptNumber,id:e.id})),{items:r}=await this.resilience.bulkAddItem(t,ey.IGNORE);return r.length===t.length?{status:"successful"}:{status:"partial",acceptedItemIds:r.map(e=>e.id)}});this.metricsCollector.addToReclaimMetrics(r),await this.checkEventCountAndReschedule(),e(e0.SUCCESS),this.longPollingScheduler.schedule()}flush(e,t){this.metricsCollector.setResilienceMechanism(this.resilience.storeType());let{batchFlushCallback:r}=this;if(!r)throw Error("batchFlushCallback has not been set. Call PullBatchableQueue#start first.");return new Promise((i,s)=>{if(e.length<=0){i(e0.NOOP);return}r(e.map(e=>{let t=e.item;return e.retryAttempts>0&&t.msg&&(t.msg._metadata||(t.msg._metadata={}),t.msg._metadata.failedAttempts=e.retryAttempts),t}),e=>{e?(t.numberOfDeletedItems>0&&this.metricsCollector.addToItemsDiscardedByRetryCounter(t.numberOfDeletedItems),s(e)):i(e0.SUCCESS)})})}buildOptions(e){return{backoffFactor:(null==e?void 0:e.backoffFactor)||e8.backoffFactor,backoffJitterPercentage:(null==e?void 0:e.backoffJitterPercentage)!==void 0?e.backoffJitterPercentage:e8.backoffJitterPercentage,batchFlushSize:(null==e?void 0:e.batchFlushSize)||e8.batchFlushSize,flushBeforeUnload:(null==e?void 0:e.flushBeforeUnload)||e8.flushBeforeUnload,flushWaitMs:(null==e?void 0:e.flushWaitMs)||e8.flushWaitMs,maxItems:(null==e?void 0:e.maxItems)||e8.maxItems,maxAttempts:(null==e?void 0:e.maxAttempts)||e8.maxAttempts,maxRetryDelay:(null==e?void 0:e.maxRetryDelay)||e8.maxRetryDelay,minRetryDelay:(null==e?void 0:e.minRetryDelay)||e8.minRetryDelay}}}let e7=(e,t,r,i)=>new e9(e,t,r||{},i),te=function(e){return e.IDENTIFY="identify",e.PAGE="page",e.TRACK="track",e}({});function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function ti(e,t){try{let r=await t;return e.map(e=>(function(e,t){if(!(t&&t instanceof Function))return e;if(e.msg.type===te.PAGE||e.msg.type===te.TRACK){let r=t();r&&Array.isArray(r)&&(e.msg.properties=tr(tr({},e.msg.properties),{},{xid:r}))}else if(e.msg.traits&&e.msg.type===te.IDENTIFY){let r=t();r&&Array.isArray(r)&&(e.msg.traits=tr(tr({},e.msg.traits),{},{xid:r}))}return e})(e,r))}catch(t){return e}}var ts=r("./node_modules/memoize-one/dist/memoize-one.esm.js");function tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}let to=async e=>{var t;let r=null===(t=ta(e))||void 0===t?void 0:t.signal,s=tl(e.url),n=await fetch(e.url,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e.batch),signal:r},s));if(429===n.status||n.status>=500&&n.status<600)throw Error(`HTTP Error ${n.status} (${n.statusText})`);return n},ta=e=>{if(e.abortController)return e.abortController;if(e.timeout){let t=new AbortController;return setTimeout(()=>{t.abort()},e.timeout),t}},tl=(0,ts.A)(e=>new URL(e).origin===location.origin?{}:{mode:"cors",credentials:"include"});var tc=r("./node_modules/@babel/runtime/helpers/esm/typeof.js");function tu(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function td(e){tu(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,tc.A)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}function tp(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function th(e){tu(1,arguments);var t=td(e);return t.setHours(0,0,0,0),t}function tm(e,t){var r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}var tf=r("./node_modules/js-cookie/src/js.cookie.js"),tg=r.n(tf);let ty=function(e){return e.AWC_TLD_TEST="AWC_TLD_TEST",e.AWC_ANALYTICS_DEBUG="AWC_ANALYTICS_DEBUG",e.AJS_ANONYMOUS_ID="AJS_ANONYMOUS_ID",e}({});class tb{constructor(e,t){this.key=e,this.options=t}getAttributes(){return this.options}getKey(){return this.key}}let tv=()=>{try{return window&&window.location&&"https:"===window.location.protocol}catch(e){return!1}},tC={[ty.AWC_TLD_TEST]:new tb("__awc_tld_test__",{expires:365,secure:tv(),path:"/"}),[ty.AWC_ANALYTICS_DEBUG]:new tb("atlassian_analytics_debug",{expires:365,secure:tv(),path:"/"}),[ty.AJS_ANONYMOUS_ID]:new tb("ajs_anonymous_id",{expires:365,secure:tv(),path:"/"})},tw=new class{constructor(){(0,i.A)(this,"_data",{}),(0,i.A)(this,"length",0),(0,i.A)(this,"setItem",(e,t)=>(this._data[e]=t,this.length=Object.keys(this._data).length,t)),(0,i.A)(this,"getItem",e=>e in this._data?this._data[e]:null),(0,i.A)(this,"removeItem",e=>(e in this._data&&delete this._data[e],this.length=Object.keys(this._data).length,null)),(0,i.A)(this,"clear",()=>{this._data={},this.length=0}),(0,i.A)(this,"key",e=>Object.keys(this._data)[e])}},t_="awcInMemoryStorageFallback";function tO(e){let t="test_value";if(!e)return!1;try{let r="awc.storage.support";e.setItem(r,t);let i=e.getItem(r);return e.removeItem(r),i===t}catch(e){return!1}}class tI{constructor(e,t={}){(0,i.A)(this,"getStore",()=>this._store),(0,i.A)(this,"getItem",e=>this._store.getItem(this.createKey(e))),(0,i.A)(this,"removeItem",e=>this._store.removeItem(this.createKey(e))),(0,i.A)(this,"setItem",(e,t)=>{try{this._store.setItem(this.createKey(e),t)}catch(r){(function(e){let t=!1;if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else -2147024882===e.number&&(t=!0);return t})(r)&&(this.swapToInMemory(),this._store.setItem(this.createKey(e),t))}}),(0,i.A)(this,"swapToInMemory",()=>{let e;if(this._store===tw||"undefined"==typeof window)return;let t=Object.keys(this._store||{});tO(window[t_])?e=window[t_]:(e=tw,window[t_]||(window[t_]=tw)),t.forEach(t=>{if(0===t.indexOf(this.getPrefix())){let r=this._store.getItem(t);r&&e.setItem(t,r)}}),this._store=e}),(0,i.A)(this,"clear",()=>this._store.clear()),(0,i.A)(this,"key",e=>this._store.key(e)),(0,i.A)(this,"getPrefix",()=>this._prefix),(0,i.A)(this,"createKey",e=>this._prefix?`${this.getPrefix()}.${e}`:e),this.options=t;let r=[];(void 0===t.useStoragePrefix||t.useStoragePrefix)&&r.push("awc"),t.envPrefix&&t.envPrefix!==o.sR.PROD&&r.push(t.envPrefix),this._prefix=r.join("-"),tO(e)?this._store=e:this.swapToInMemory()}}let tE=class extends tI{constructor(e){let t;try{t=window.localStorage||tw}catch(e){t=tw}super(t,e)}};class tA{constructor(){this.safeStorage=new tE({useStoragePrefix:!1})}set(e,t){return this.safeStorage.setItem(e,t),t}get(e){return this.safeStorage.getItem(e)||void 0}remove(e){this.safeStorage.removeItem(e)}}let tS=(e=!1)=>!e&&!("file:"===location.protocol||"chrome-extension:"===location.protocol),tk=tC.AWC_TLD_TEST.getKey(),tj="tld_test",tT=(0,ts.A)(()=>{if("undefined"==typeof location)return"";let{hostname:e}=location,t=e.split(".");for(let e=1;e<=t.length;e++){let r=t.slice(-1*e),i=`.${r.join(".")}`;if(tg().set(tk,tj,{domain:i}),tg().get(tk)===tj)return tg().remove(tk,{domain:i}),i}return e});function tP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function tx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tP(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class tD{constructor(e){this.cookieLike=tS(e)?tg():new tA}set(e,t,r){if(!tC[e]){console.warn(`Unknown cookie key ${e} provided, not set.`);return}return this.cookieLike.set(tC[e].getKey(),t,tx(tx({},tC[e].getAttributes()),{},{domain:tT()},r))}get(e){if(!tC[e]){console.warn(`Unknown cookie key ${e} provided, not fetched.`);return}return this.cookieLike.get(tC[e].getKey())}remove(e,t){if(!tC[e]){console.warn(`Unknown cookie key ${e} provided, not removed.`);return}this.cookieLike.remove(tC[e].getKey(),tx({},t))}}let tN="SAFE",tR="UNSAFE",tL="LOCAL_STORAGE";class tM{constructor(e){this.store=new tE({useStoragePrefix:!1}),this.cookie=new tD(e)}getUserId(){return this.userId||null}setUserId(e){this.userId=e}getAnonymousId(e){return this.getAnonymousIdFromLocalStorageAndUpdateCookieIfStale()||this.getAnonymousIdFromCookieAndUpdateLocalStorage()||this.generateNewAnonymousId(e)}setAnonymousId(e){let t=JSON.stringify(e);return this.cookie.set(ty.AJS_ANONYMOUS_ID,t),this.lastAnonymousIdCookieUpdate=Date.now(),this.store.setItem(tC.AJS_ANONYMOUS_ID.getKey(),t)}getAnonymousIdFromStorage(e){let t=e===tL?this.store.getItem(tC.AJS_ANONYMOUS_ID.getKey()):this.cookie.get(ty.AJS_ANONYMOUS_ID);if(t){let e={type:tR,anonymousId:t};try{let r=JSON.parse(t);if(r&&"string"==typeof r)return{type:tN,anonymousId:r};return e}catch(t){return e}}return{type:"NOT_FOUND"}}getAnonymousIdFromLocalStorageAndUpdateCookieIfStale(){let e=this.getAnonymousIdFromStorage(tL),t=!1;switch((!this.lastAnonymousIdCookieUpdate||function(e,t){tu(2,arguments);var r=td(e),i=td(t),s=tm(r,i),n=Math.abs(function(e,t){tu(2,arguments);var r=th(e),i=th(t);return Math.round((r.getTime()-tp(r)-(i.getTime()-tp(i)))/864e5)}(r,i));r.setDate(r.getDate()-s*n);var o=Number(tm(r,i)===-s),a=s*(n-o);return 0===a?0:a}(new Date,new Date(this.lastAnonymousIdCookieUpdate))>=7)&&(t=!0),e.type){case tN:return t&&this.setAnonymousId(e.anonymousId),e.anonymousId;case tR:return e.anonymousId;default:return null}}getAnonymousIdFromCookieAndUpdateLocalStorage(){let e=this.getAnonymousIdFromStorage("COOKIE");switch(e.type){case tN:case tR:return this.store.setItem(tC.AJS_ANONYMOUS_ID.getKey(),JSON.stringify(e.anonymousId)),e.anonymousId;default:return null}}generateNewAnonymousId(e=n()){let t=e();return this.setAnonymousId(t),t}}var tF=r("./node_modules/@segment/isodate-traverse/lib/index.js"),tU=r.n(tF);function tB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function t$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tB(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let tq=e=>t$(t$({},e.context),{},{userAgent:navigator.userAgent}),tV=e=>{let t=tW(e);return tU()(t)},tW=e=>{if(null===e||"object"!=typeof e)return e;let t={};return Object.keys(e).forEach(r=>{let i=tz(e,r);void 0!==i&&(Array.isArray(i)?t[r]=i.map(e=>tW(e)):"object"==typeof i&&null!==i?t[r]=tW(i):t[r]=i)}),t},tz=(e,t)=>e[t];function tH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function tK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tH(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class tG{constructor(e){var t;(0,i.A)(this,"sendEvents",async(e,t)=>{let r=this.resilienceQueue.getGlobalRetryCount(),i=this.metrics.getMetricsPayload(),s=tK(tK({},i),{},{httpRetryCount:r});for(let e in s)0===s[e]&&delete s[e];let n=await this.attachXIDs(e),o=new Date().toISOString(),a=n.map(e=>(e.msg.sentAt=o,e.msg));try{let e=await to({url:this.gasv3BatchUrl,batch:{batch:a,sentAt:o,metadata:s},timeout:this.options.requestTimeout});this.metrics.subtractFromMetrics(i),t(null,e)}catch(e){t(e,null)}}),this.options=tK(tK({},e),{},{requestTimeout:e.requestTimeout||1e4,retryQueueOptions:e.retryQueueOptions||{},logger:e.logger||console,disableCookiePersistence:e.disableCookiePersistence||!1}),this.user=new tM(null===(t=this.options)||void 0===t?void 0:t.disableCookiePersistence),this.xidPromiseCallback=e.xidPromiseGetter(),this.gasv3BatchUrl=`${e.apiHostProtocol}://${e.apiHost}/batch`,this.metrics=eQ(),this.resilienceQueue=e7(e.retryQueuePrefix,e.product,this.options.retryQueueOptions,this.options.logger),this.resilienceQueue.start(this.sendEvents)}getUser(){return this.user}async track(e,t,r,i){let s=tK(tK({},this.buildBaseEvent(r,te.TRACK,t)),{},{type:te.TRACK,properties:tV(t),event:e}),n=tK(tK({},s),{},{messageId:this.createMessageId()}),o=this.packageEvent(n);await this.resilienceQueue.addItem(o),i&&i()}async page(e,t,r,i){let s=tK(tK({},this.buildBaseEvent(r,te.PAGE,t)),{},{type:te.PAGE,properties:tV(t),name:e}),n=tK(tK({},s),{},{messageId:this.createMessageId()}),o=this.packageEvent(n);await this.resilienceQueue.addItem(o),i&&i()}async identify(e,t,r,i){let s=tK(tK({},this.buildBaseEvent(r,te.IDENTIFY,t)),{},{type:te.IDENTIFY,traits:tV(t)}),n=tK(tK({},s),{},{messageId:this.createMessageId()}),o=this.packageEvent(n);await this.resilienceQueue.addItem(o),i&&i()}buildBaseEvent(e,t,r){return{context:tq(tV(e)),timestamp:new Date().toISOString(),type:t,userId:this.user.getUserId(),anonymousId:r.anonymousId||this.user.getAnonymousId()}}createMessageId(){return`ajs-${n()()}`}packageEvent(e){let{apiHost:t,apiHostProtocol:r}=this.options;return{headers:{"Content-Type":"text/plain"},msg:e,url:`${r}://${t}/${e.type.charAt(0)}`}}async attachXIDs(e){return this.xidPromiseCallback?ti(e,this.xidPromiseCallback):Promise.resolve(e)}}var tQ=r("./node_modules/query-string/index.js");let tJ=e=>window.history.replaceState({},"",e),tX=(e,t=tJ)=>{let r=window.location.href,i=window.location.hash,s=""!==i?r.replace(i,""):r,{url:n,query:o}=(0,tQ.parseUrl)(s),a=M(o,e);if(Object.keys(a).length>0){let r=L(o,e);t(Object.keys(r).length>0?`${n}?${(0,tQ.stringify)(r)}${i}`:`${n}${i}`)}return a};class tY{constructor(){(0,i.A)(this,"handleOriginParameters",(e,t)=>{let r=Object.keys(e);if(!(r.length>0))throw Error("Empty parameter mapping provided");let i=r.filter(e=>0>Object.values(o.D0).indexOf(e));if(i.length>0)throw Error(`Invalid Origin Tracing Parameter(s) supplied: ${i.join()}!`);let s=tX((e,t)=>r.indexOf(t)>=0,t);return Object.keys(s).map(t=>{let r=e[t](s[t]);return{[t]:r}}).reduce((e,t)=>Object.assign(e,t),{})}),this._originStore={}}}let tZ="/gateway/api/gasv3/api/v1",t0=()=>"as.staging.atl-paas-us-gov-mod.net/api/v1",t2=()=>"api.stg.atlassian-us-gov-mod.com/gasv3/api/v1",t1=({useStargate:e,env:t,useLegacyUrl:r,envOverride:i})=>{if(t===o.sR.LOCAL||t===o.sR.DEV)throw Error("No LOCAL or DEV environments for FedRAMP.");if(t===o.sR.PROD&&i)throw Error("Cannot override to FedRAMP Sandbox for Prod.");return e?r?t===o.sR.PROD?"api.atlassian-us-gov-mod.com/gasv3/api/v1":t2():window.location.host+tZ:t===o.sR.PROD?"as.atlassian-us-gov-mod.com/api/v1":t0()},t3=({useStargate:e,env:t,useLegacyUrl:r})=>e?r?t===o.sR.PROD?"api-private.atlassian.com/gasv3/api/v1":"api-private.stg.atlassian.com/gasv3/api/v1":window.location.host+tZ:t===o.sR.PROD?"as.atlassian.com/api/v1":"as.staging.atl-paas.net/api/v1",t4="session.id",t6="session.expiry",t5=/^\d+$/,t8=()=>{};class t9{constructor(e={}){(0,i.A)(this,"_generateNewSessionId",()=>{let e=Date.now().toString();return this._safeLocalStorage.setItem(t4,e),this._onNewSessionStarted&&this._onNewSessionStarted(),e}),(0,i.A)(this,"_updateSessionExpiry",()=>{let e=Date.now()+this._sessionExpiryTime;return this._safeLocalStorage.setItem(t6,e.toString()),e}),(0,i.A)(this,"_debouncedUpdateSessionExpiry",e=>{let{_updateSessionExpiry:t}=this;if(e<Date.now()+this._sessionExpiryDebounceThresholdPercentage*this._sessionExpiryTime)return t();this._sessionExpiryDebounceTimer&&clearTimeout(this._sessionExpiryDebounceTimer),this._sessionExpiryDebounceTimer=setTimeout(()=>{t()},this._sessionExpiryDebounce)}),this._sessionExpiryTime=e.sessionExpiryTime||18e5,this._sessionExpiryDebounce=e.sessionExpiryDebounce||5e3,this._sessionExpiryDebounceThresholdPercentage=e.sessionExpiryDebounceThresholdPercentage||.9,this._onNewSessionStarted=e.onNewSessionStarted?e.onNewSessionStarted:t8,this._safeLocalStorage=new tE}getCurrentSessionId(){let e=this._safeLocalStorage.getItem(t4),t=parseInt(this._safeLocalStorage.getItem(t6)||"0",10)||0;return(this._debouncedUpdateSessionExpiry(t),!e||t<=Date.now()||Number.isNaN(t)||!t5.test(e))?this._generateNewSessionId():e}}let t7=class extends tI{constructor(e){let t;try{t=window.sessionStorage||tw}catch(e){t=tw}super(t,e)}},re="tab.id";class rt{constructor(){(0,i.A)(this,"_generateNewTabId",()=>{let e=n()();return this._safeSessionStorage.setItem(re,e),e}),this._safeSessionStorage=new t7}getCurrentTabId(){let e=this._safeSessionStorage.getItem(re);return e||(e=this._generateNewTabId()),e}}function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function ri(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let rs="taskSessions",rn="taskSessionsInit",ro="awc.";class ra{constructor(){(0,i.A)(this,"_taskSessionsNotRecentlyInitialised",e=>null===this._safeSessionStorage.getItem(rs)||null===this._safeSessionStorage.getItem(rn)||parseInt(this._safeSessionStorage.getItem(rn)||"0",10)<e-3e3),(0,i.A)(this,"_removeTaskSessionPrefix",(e,t)=>t.split(ro)[1]),(0,i.A)(this,"_isTaskSessionQueryParam",(e,t)=>t.startsWith(ro)),(0,i.A)(this,"getAllTaskSessions",()=>{try{return JSON.parse(this._safeSessionStorage.getItem(rs)||"")}catch(e){return{}}}),(0,i.A)(this,"_writeToSessionStorage",e=>{try{this._safeSessionStorage.setItem(rs,JSON.stringify(e))}catch(e){}}),(0,i.A)(this,"_appendTaskSessions",e=>{let t=this.getAllTaskSessions(),r=null===t?e:Object.assign(t,e);this._writeToSessionStorage(r)}),(0,i.A)(this,"_safelyRemoveKey",(e,t)=>null===e?{}:(delete e[t],e)),(0,i.A)(this,"createTaskSession",e=>{let t=n()(),r={};return r[e]=t,this._appendTaskSessions(r),t}),(0,i.A)(this,"createTaskSessionWithProvidedId",(e,t)=>{if("string"!=typeof t)throw TypeError("invalid taskSessionId, must be string");let r={};r[e]=t,this._appendTaskSessions(r)}),(0,i.A)(this,"completeTaskSession",e=>{let t=this.getAllTaskSessions(),r=this._safelyRemoveKey(t,e);this._writeToSessionStorage(r)}),(0,i.A)(this,"formatTaskSessionQueryString",({uri:e,includedTaskSessions:t})=>{let{url:r,query:i}=(0,tQ.parseUrl)(e),s=this.getAllTaskSessions(),n=t?R(s,t):F(s,Object.values(o.D0));if(0===Object.keys(n).length)return e;let a=ri(ri({},N(n,(e,t)=>ro+t)),i);return`${r}?${(0,tQ.stringify)(a)}`}),(0,i.A)(this,"stripQueryParameters",()=>{let e=N(tX(this._isTaskSessionQueryParam),this._removeTaskSessionPrefix);this._appendTaskSessions(e)});let e=Date.now();this._safeSessionStorage=new t7;try{this._taskSessionsNotRecentlyInitialised(e)&&(this._writeToSessionStorage({}),this._safeSessionStorage.setItem(rn,e.toString()))}catch(e){}}}let rl=tC.AWC_ANALYTICS_DEBUG.getKey(),rc="synthetic",ru=()=>{try{return JSON.parse(tg().get(rl)||"false")}catch(e){tg().remove(rl)}return!1},rd=class{constructor(){(0,i.A)(this,"_bind",()=>{"undefined"==typeof window||window.testAnalytics||(window.testAnalytics={eventCache:[],events:()=>window.testAnalytics.eventCache,clear:()=>{window.testAnalytics.eventCache=[];try{localStorage.removeItem("awc.ui.viewed.last.sent"),localStorage.removeItem("awc-staging.ui.viewed.last.sent"),localStorage.removeItem("awc-dev.ui.viewed.last.sent"),localStorage.removeItem("awc-local.ui.viewed.last.sent")}catch(e){}}})}),(0,i.A)(this,"_cache",e=>{"undefined"!=typeof window&&(window.testAnalytics.eventCache.length>=100&&(window.testAnalytics.eventCache=window.testAnalytics.eventCache.slice(1,window.testAnalytics.eventCache.length)),window.testAnalytics.eventCache.push(e))}),(0,i.A)(this,"_shouldCacheEvent",()=>this._isDebugCookieEnabled),(0,i.A)(this,"saveEvent",e=>{e&&this._shouldCacheEvent()&&(window.testAnalytics||this._bind(),e.tags instanceof Array?e.tags.push(rc):e.tags=[rc],this._cache(e))}),this._isDebugCookieEnabled=ru(),this._isDebugCookieEnabled&&this._bind()}},rp=["embeddedProduct"];function rh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function rm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rh(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class rf{constructor(e,t,r,s={}){if((0,i.A)(this,"start",()=>{this._startInterval(),this._bindEventListeners()}),(0,i.A)(this,"stop",()=>{this._stopInterval(),this._unbindEventListeners()}),(0,i.A)(this,"resetTimers",()=>{this._intervalId&&(this.stop(),this.start())}),(0,i.A)(this,"_bindEventListeners",()=>{"undefined"!=typeof window&&(window.addEventListener("focus",this._focusListener),window.addEventListener("blur",this._blurListener))}),(0,i.A)(this,"_unbindEventListeners",()=>{"undefined"!=typeof window&&(window.removeEventListener("focus",this._focusListener),window.removeEventListener("blur",this._blurListener))}),(0,i.A)(this,"_startInterval",()=>{clearInterval(this._intervalId),this._intervalId=setInterval(this._handleInterval,this._delay)}),(0,i.A)(this,"_stopInterval",()=>{this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)}),(0,i.A)(this,"_getProductKey",(e,t)=>{let r=e;return t&&(r+=`-${t}`),r}),(0,i.A)(this,"_getLastSentTimestamp",(e,t,r)=>(((this._parseLocalStorageData()||{})[r]||{})[t]||{})[e]||null),(0,i.A)(this,"_parseLocalStorageData",()=>{let e=this._safeLocalStorage.getItem(this._storageKey);try{return JSON.parse(e||"")}catch(e){return this._safeLocalStorage.removeItem(this._storageKey),null}}),(0,i.A)(this,"_setLastSentTimestamp",(e,t,r)=>{let i=this._parseLocalStorageData()||{},s=i[r]||{},n=s[t]||{};n[e]=Date.now(),s[t]=n,i[r]=s,this._safeLocalStorage.setItem(this._storageKey,JSON.stringify(i))}),(0,i.A)(this,"_shouldSendEvent",(e,t,r,i)=>!!document.hasFocus()&&(t===o.v7.NONE||!!r)&&!!i&&Date.now()-this._getLastSentTimestamp(e,r,i)>this._throttle),(0,i.A)(this,"_handleInterval",()=>{let e=this._getContext(),{embeddedProduct:t}=e,r=(0,eA.A)(e,rp);this._sendEvent(this._product,r),t&&this._sendEvent(t,r,!0)}),(0,i.A)(this,"_sendEvent",(e,t,r=!1)=>{let{subproduct:i,tenantIdType:s,tenantId:n,userId:o,lastScreenEvent:a,attributes:l}=t,c=this._getProductKey(e,i);if(this._shouldSendEvent(c,s,n,o)){this._setLastSentTimestamp(c,n,o);let t=this._createEvent(e,i,r,a,l);this._onEvent(t)}}),(0,i.A)(this,"_createEvent",(e,t,r,i,s)=>{let n={product:e,source:"ui",action:"viewed",actionSubject:"ui",attributes:s};return r&&(n.subproduct=null,n.version=null,n.attributes=rm(rm({},n.attributes),{},{embeddedInEnv:this._productInfo.env,embeddedInProduct:this._productInfo.product,embeddedInSubproduct:t,embeddedInVersion:this._productInfo.version,embeddedInOrigin:this._productInfo.origin,embeddedInPlatform:this._productInfo.platform})),i&&(n.attributes=rm(rm({},n.attributes),{},{lastScreenEvent:{name:i.name,attributes:i.attributes}})),n}),!e)throw Error("Missing productInfo");if(!e.product)throw Error("Missing productInfo.product");if(!t)throw Error("Missing getContext callback");if("function"!=typeof t)throw Error("Invalid getContext, must be function");if(!r)throw Error("Missing onEvent callback");if("function"!=typeof r)throw Error("Invalid onEvent, must be function");this._productInfo=e,this._product=e.product,this._getContext=t,this._onEvent=r,this._delay=s.delay||2e3,this._throttle=s.throttle||36e5,this._storageKey=s.storageKey||"ui.viewed.last.sent",this._safeLocalStorage=new tE({envPrefix:this._productInfo.env}),this._focusListener=()=>{this._startInterval()},this._blurListener=()=>{this._stopInterval()}}}function rg(e,t){return e&&"function"==typeof e?()=>{e(t)}:null}let ry=function(e){return e.XC="xc",e.UID="uid",e}({}),rb=()=>[{type:ry.XC,state:"TIMEOUT"},{type:ry.UID,state:"TIMEOUT"}],rv=()=>[{type:ry.XC,state:"UNKNOWN"},{type:ry.UID,state:"UNKNOWN"}],rC=(e,t)=>{if(e&&t&&"function"==typeof t)return Promise.race([t().catch(()=>()=>rv()),new Promise(e=>{setTimeout(()=>e(()=>rb()),5e3)})])};function rw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function r_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rw(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let rO="last.screen.event";class rI{constructor(e,t={}){if((0,i.A)(this,"_useStargate",e=>null==e||e),(0,i.A)(this,"_endsWith",(e,t)=>-1!==e.indexOf(t,e.length-t.length)),(0,i.A)(this,"_changeInternalUserId",(e,t)=>{this.eventProcessor.getUser().setUserId(e),t&&t!==this.eventProcessor.getUser().getAnonymousId()&&this.eventProcessor.getUser().setAnonymousId(t)}),(0,i.A)(this,"_createSubproductGetter",e=>h(e,"Cannot get subproduct from the callback. Proceeding without it.")),(0,i.A)(this,"_createEmbeddedProductGetter",e=>h(e,"Cannot get embeddedProduct from the callback. Proceeding without it.")),(0,i.A)(this,"_getLastScreenEvent",()=>{try{return JSON.parse(this._safeSessionStorage.getItem(rO)||"")}catch(e){return this._safeSessionStorage.removeItem(rO),null}}),(0,i.A)(this,"_setLastScreenEvent",e=>{this._safeSessionStorage.setItem(rO,JSON.stringify({name:e.name,attributes:e.attributes}))}),(0,i.A)(this,"_shouldEventBeDelayed",e=>{if(!e.tags||-1===e.tags.indexOf("measurement"))return!1;let t=!1!==e.highPriority;return this.eventDelayQueue.isDelayingLowPriorityEvents()&&!t}),(0,i.A)(this,"_fireEvent",(e,t,r,i)=>{switch(t.eventType){case o.$q.UI:case o.$q.OPERATIONAL:case o.$q.TRACK:return this.eventProcessor.track(e,t,r,i);case o.$q.SCREEN:return this.eventProcessor.page(e,t,r,i);case o.$q.IDENTIFY:return this.eventProcessor.identify(e,t,r,i);default:throw Error(`No handler has been defined for events of type ${t.eventType}`)}}),(0,i.A)(this,"_fireDelayedEvent",(e,t,r,i)=>{try{this._changeInternalUserId(i.userId,i.anonymousId),t.tags=[...t.tags||[],"sentWithDelay"],this._fireEvent(e,t,r,void 0)}finally{this._changeInternalUserId(this._userInfo.userId,this._userInfo.anonymousId)}}),(0,i.A)(this,"_delayEvent",(e,t,r,i,s)=>{this.eventDelayQueue.push(e,t,r,i),s&&s()}),(0,i.A)(this,"_processEvent",(e,t,r,i)=>(this._testingCache.saveEvent(t),this._shouldEventBeDelayed(t))?(this._delayEvent(e,t,r,this._userInfo,i),Promise.resolve()):this._fireEvent(e,t,r,i)),(0,i.A)(this,"setEmbeddedProduct",e=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(e),this.resetUIViewedTimers()}),(0,i.A)(this,"clearEmbeddedProduct",()=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(null)}),(0,i.A)(this,"setSubproduct",e=>{this._productInfo.subproduct=this._createSubproductGetter(e),this.resetUIViewedTimers()}),(0,i.A)(this,"setOriginTracingHandlers",e=>{let t=this.originTracing.handleOriginParameters(e,this._historyReplaceFn);Object.keys(t).forEach(e=>{void 0!==t[e].taskSessionId&&this.task.createTaskSessionWithProvidedId(e,t[e].taskSessionId)});let r={};return(Object.keys(t).forEach(e=>{t[e].originTracingAttributes?r[e]=t[e].originTracingAttributes:console.warn(`Handling method for origin parameter ${e} has not returned any attributes`)}),Object.keys(t).length>0)?this.sendOperationalEvent({action:"landed",actionSubject:"origin",source:"webClient",attributes:{originTracesLanded:r}},()=>{}):Promise.resolve()}),(0,i.A)(this,"setTenantInfo",(e,t)=>{if(!e)throw Error("Missing tenantIdType");if(e!==o.v7.NONE&&!t)throw Error("Missing tenantId");if(!(0,o.Xj)(o.v7,e))throw Error(`Invalid tenantIdType '${e}', must be an tenantType: [${(0,o.KQ)(o.v7)}]`);this._tenantInfo={tenantIdType:e,tenantId:t}}),(0,i.A)(this,"clearTenantInfo",()=>{this._tenantInfo={}}),(0,i.A)(this,"setOrgInfo",e=>{if(!e)throw Error("Missing orgId");this._orgInfo={orgId:e}}),(0,i.A)(this,"clearOrgInfo",()=>{this._orgInfo={}}),(0,i.A)(this,"setWorkspaceInfo",e=>{if(!e)throw Error("Missing workspaceId");this._workspaceInfo={workspaceId:e}}),(0,i.A)(this,"clearWorkspaceInfo",()=>{this._workspaceInfo={}}),(0,i.A)(this,"setUserInfo",(e,t)=>{(function(e,t){if(!e)throw Error("Missing userIdType");if(!t)throw Error("Missing userId");if(!(0,o.Xj)(o.Of,e))throw Error(`Invalid userIdType '${e}', must be an userType: [${(0,o.KQ)(o.Of)}]`)})(e,t),this._changeInternalUserId(t),this._userInfo={userIdType:e,userId:t,anonymousId:this.eventProcessor.getUser().getAnonymousId()}}),(0,i.A)(this,"clearUserInfo",()=>{this._changeInternalUserId(void 0),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId()}}),(0,i.A)(this,"setAlias",(e,t)=>{if(!e)throw Error("Missing aliasType");if(!(0,o.Xj)(o.VD,e))throw Error(`Invalid aliasType '${e}', must be an aliasType: [${(0,o.KQ)(o.VD)}]`);this._aliases[e]=t}),(0,i.A)(this,"clearAlias",()=>{this._aliases={}}),(0,i.A)(this,"setGroup",(e,t)=>{if(!e)throw Error("Missing groupType");if(!(0,o.Xj)(o.iU,e))throw Error(`Invalid groupType '${e}', must be an groupType: [${(0,o.KQ)(o.iU)}]`);this._groups[e]=t}),(0,i.A)(this,"clearGroup",()=>{this._groups={}}),(0,i.A)(this,"getAnonymousId",()=>this._userInfo.anonymousId),(0,i.A)(this,"setUIViewedAttributes",e=>{if(!e)throw Error("Missing uiViewedAttributes");if("object"!=typeof e||Array.isArray(e))throw Error("Invalid uiViewedAttributes type, should be a non array object");this._uiViewedAttributes=r_({},e)}),(0,i.A)(this,"getUIViewedAttributes",()=>this._uiViewedAttributes),(0,i.A)(this,"clearUIViewedAttributes",()=>{this._uiViewedAttributes={}}),(0,i.A)(this,"sendIdentifyEvent",(e,t,r)=>{this.setUserInfo(e,t);let i={userIdType:e,eventType:o.$q.IDENTIFY};return this._processEvent(t,i,this._context,r)}),(0,i.A)(this,"sendPageEvent",(e,t)=>this.sendScreenEvent(e,t)),(0,i.A)(this,"sendScreenEvent",(e,t,r)=>{let i,s,n,a;"object"==typeof e?(i=e.name,s=e.attributes,n=e.containers,a=e.tags):(i=e,s=r),function(e){if(!e)throw Error("Missing name")}(i),q(n);let l=r_({name:i},function(e,t,r,i,s,n,a,l,c,u,d,p,h,m,f,g){let E=A(e),S=b(t),T=v(r),P=C(u),x=w(p),D={title:"",path:"",url:"",referrer:"",search:"",eventType:o.$q.SCREEN};return y(y(y(y(y(y(y(y(y(y(y(y({},E),S),T),P),D),k("attributes",i)),k("nonPrivacySafeAttributes",s)),j(m)),I(h)),{},{tags:n,tabId:a,sessionId:l,taskSessions:c,pageLoadId:d},x),_(f)),O(g))}(this._productInfo,this._tenantInfo,this._userInfo,s,e.nonPrivacySafeAttributes,a,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,e,n,this._aliases,this._groups));return this._setLastScreenEvent(l),this._processEvent(i,l,this._context,rg(t,l))}),(0,i.A)(this,"sendTrackEvent",(e,t)=>{W(e);let r=x(this._productInfo,this._tenantInfo,this._userInfo,e,o.$q.TRACK,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(P(e),r,this._context,rg(t,r))}),(0,i.A)(this,"sendUIEvent",(e,t)=>{W(e);let r=x(this._productInfo,this._tenantInfo,this._userInfo,e,o.$q.UI,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(P(e),r,this._context,rg(t,r))}),(0,i.A)(this,"sendOperationalEvent",(e,t)=>{W(e);let r=x(this._productInfo,this._tenantInfo,this._userInfo,e,o.$q.OPERATIONAL,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(P(e),r,this._context,rg(t,r))}),(0,i.A)(this,"startUIViewedEvent",e=>{this.stopUIViewedEvent(),this._uiViewedEvent=new rf(this._productInfo,()=>({embeddedProduct:this._productInfo.embeddedProduct(),subproduct:this._productInfo.subproduct(),tenantIdType:this._tenantInfo.tenantIdType,tenantId:this._tenantInfo.tenantId,userId:this._userInfo.userId,lastScreenEvent:this._getLastScreenEvent(),attributes:this._uiViewedAttributes}),t=>this.sendUIEvent(t,e)),this._uiViewedEvent.start()}),(0,i.A)(this,"stopUIViewedEvent",()=>{this._uiViewedEvent&&(this._uiViewedEvent.stop(),this._uiViewedEvent=null)}),(0,i.A)(this,"resetUIViewedTimers",()=>{this._uiViewedEvent&&this._uiViewedEvent.resetTimers()}),(0,i.A)(this,"startApdexEvent",e=>{this._apdexEvent.start(e)}),(0,i.A)(this,"getApdexStart",e=>this._apdexEvent.getStart(e)),(0,i.A)(this,"stopApdexEvent",(e,t)=>{this._apdexEvent.stop(e,t)}),(0,i.A)(this,"startLowPriorityEventDelay",(e,t)=>{this.eventDelayQueue.startLowPriorityEventDelay(e,t)}),(0,i.A)(this,"stopLowPriorityEventDelay",()=>{this.eventDelayQueue.stopLowPriorityEventDelay()}),(0,i.A)(this,"onEvent",(e,t)=>{if(!t)throw Error("Missing analyticsData");if(!t.eventType)throw Error("Missing analyticsData.eventType");if(t.eventType===o.$q.TRACK)return this.sendTrackEvent(t);if(t.eventType===o.$q.UI)return this.sendUIEvent(t);if(t.eventType===o.$q.OPERATIONAL)return this.sendOperationalEvent(t);if(t.eventType===o.$q.SCREEN)return this.sendScreenEvent(t.name,null,t.attributes);if(t.eventType===o.$q.IDENTIFY)return this.sendIdentifyEvent(t.userIdType,t.userId);throw Error(`Invalid analyticsData.eventType '${t.eventType}', must be an eventType: [${(0,o.KQ)(o.$q)}]`)}),!e)throw Error("Missing productInfo");if(!e.env)throw Error("Missing productInfo.env");if(!e.product)throw Error("Missing productInfo.product");if(!(0,o.Xj)(o.sR,e.env))throw Error(`Invalid productInfo.env '${e.env}', must be an envType: [${(0,o.KQ)(o.sR)}]`);if(e.perimeter&&!(0,o.Xj)(o.KW,e.perimeter))throw Error(`Invalid productInfo.perimeter '${e.perimeter}', must be an perimeterType: [${(0,o.KQ)(o.KW)}]`);if(e.origin){if(!(0,o.Xj)(o.VH,e.origin))throw Error(`Invalid productInfo.origin '${e.origin}', must be an originType: [${(0,o.KQ)(o.VH)}]`)}else e.origin=o.VH.WEB;e.platform?function(e){if(!(0,o.Xj)(o.AQ,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be a platformType: [${(0,o.KQ)(o.AQ)}]`);if(e.origin===o.VH.DESKTOP&&!(0,o.Xj)(o.vB,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be one of [mac, linux, windows]`);if(e.origin===o.VH.WEB&&!(0,o.Xj)(o.LK,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be one of [web, mobileWeb]`)}(e):e.platform=e.origin===o.VH.WEB?o.AQ.WEB:o.AQ.DESKTOP,this.logger=t.logger||console,this._productInfo=r_(r_({},e),{},{subproduct:this._createSubproductGetter(e.subproduct),embeddedProduct:this._createEmbeddedProductGetter(e.embeddedProduct)}),this._tenantInfo={},this._orgInfo={},this._uiViewedAttributes={},this._context=function(e){let t=window.screen||{};return{context:{locale:e.locale,screen:{width:t.width,height:t.height,density:window.devicePixelRatio},library:{name:"analytics.js",version:"4.25.0"}}}}(this._productInfo),this._safeSessionStorage=new t7;let r=this._useStargate(t.useStargate),s=t.apiHost||function({useStargate:e,env:t,useLegacyUrl:r,perimeter:i,envOverride:s}){return i===o.KW.FEDRAMP_MODERATE?t1({useStargate:e,env:t,useLegacyUrl:r,envOverride:s}):t3({useStargate:e,env:t,useLegacyUrl:r})}({useStargate:r,env:e.env,useLegacyUrl:t.useLegacyUrl,perimeter:e.perimeter,envOverride:e.envOverride}),l=t.apiHostProtocol||"https",c={maxRetryDelay:6e4,minRetryDelay:t.minRetryDelay||1e3,backoffFactor:2,flushWaitMs:t.flushWaitInterval,flushBeforeUnload:t.flushBeforeUnload},u=`awc-${e.env}`,p=t.disableCookiePersistence||!1;this.eventProcessor=new tG({apiHost:s,apiHostProtocol:l,product:e.product,retryQueuePrefix:u,retryQueueOptions:c,xidPromiseGetter:()=>rC(t.xidConsent,t.xidPromiseFn),logger:this.logger,disableCookiePersistence:p}),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId(null==t?void 0:t.customAnonymousIdGenerator)},this._pageVisibility=new a,this._tabTracking=new rt,this._sessionTracking=new t9({sessionExpiryTime:t.sessionExpiryTime,onNewSessionStarted:t.onNewSessionStarted}),this.task=new ra,this.originTracing=new tY,this._apdexEvent=new d(this.sendOperationalEvent,this._pageVisibility),this._historyReplaceFn="function"==typeof t.historyReplaceFn?t.historyReplaceFn:tJ,this.eventDelayQueue=new X(this._fireDelayedEvent,t.delayQueueCompressors||[]),this._testingCache=new rd,this._pageLoadId=n()(),this._workspaceInfo={},this._aliases={},this._groups={}}}},"./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebTypes.js":(e,t,r)=>{"use strict";r.d(t,{$q:()=>s,AQ:()=>n,D0:()=>p,KQ:()=>h,KW:()=>f,LK:()=>d,LR:()=>c,Of:()=>l,VD:()=>g,VH:()=>o,Xj:()=>m,iU:()=>y,sR:()=>i,v7:()=>a,vB:()=>u});let i=function(e){return e.LOCAL="local",e.DEV="dev",e.STAGING="staging",e.PROD="prod",e}({}),s=function(e){return e.TRACK="track",e.UI="ui",e.OPERATIONAL="operational",e.SCREEN="screen",e.IDENTIFY="identify",e}({}),n=function(e){return e.MAC="mac",e.LINUX="linux",e.WINDOWS="windows",e.DESKTOP="desktop",e.WEB="web",e.MOBILE_WEB="mobileWeb",e}({}),o=function(e){return e.DESKTOP="desktop",e.WEB="web",e}({}),a=function(e){return e.CLOUD_ID="cloudId",e.ORG_ID="orgId",e.OPSGENIE_CUSTOMER_ID="opsgenieCustomerId",e.HALP_TEAM_ID="halpTeamId",e.TRANSACTION_ACCOUNT_ID="transactionAccountId",e.TRELLO_WORKSPACE_ID="trelloWorkspaceId",e.NONE="none",e}({}),l=function(e){return e.ATLASSIAN_ACCOUNT="atlassianAccount",e.HASHED_EMAIL="hashedEmail",e.TRELLO="trello",e.OPSGENIE="opsgenie",e.HALP="halp",e}({}),c=function(e){return e.TRANSITION="transition",e.INITIAL_LOAD="initialLoad",e}({}),u=Object.freeze([n.DESKTOP,n.MAC,n.LINUX,n.WINDOWS]),d=Object.freeze([n.WEB,n.MOBILE_WEB]),p=function(e){return e.ATL_ORIGIN="atlOrigin",e}({});function h(e){return Object.values(e)}function m(e,t){return Object.values(e).indexOf(t)>-1}let f=function(e){return e.C5="c5",e.COMMERCIAL="commercial",e.FEDRAMP_MODERATE="fedramp-moderate",e.FEDRAMP_HIGH="fedramp-high",e}({}),g={},y=function(e){return e.TRANSACTION_ACCOUNT_ID="transactionAccountId",e}({})},"./node_modules/@atlassiansox/analytics-web-client/node_modules/uuid/lib/bytesToUuid.js":e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var i=r||0;return[t[e[i++]],t[e[i++]],t[e[i++]],t[e[i++]],"-",t[e[i++]],t[e[i++]],"-",t[e[i++]],t[e[i++]],"-",t[e[i++]],t[e[i++]],"-",t[e[i++]],t[e[i++]],t[e[i++]],t[e[i++]],t[e[i++]],t[e[i++]]].join("")}},"./node_modules/@atlassiansox/analytics-web-client/node_modules/uuid/lib/rng-browser.js":e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var i=Array(16);e.exports=function(){for(var e,t=0;t<16;t++)(3&t)==0&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},"./node_modules/@atlassiansox/analytics-web-client/node_modules/uuid/v4.js":(e,t,r)=>{var i=r("./node_modules/@atlassiansox/analytics-web-client/node_modules/uuid/lib/rng-browser.js"),s=r("./node_modules/@atlassiansox/analytics-web-client/node_modules/uuid/lib/bytesToUuid.js");e.exports=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[n+a]=o[a];return t||s(o)}},"./node_modules/@segment/isodate-traverse/lib/index.js":(e,t,r)=>{"use strict";var i=r("./node_modules/@segment/isodate/lib/index.js");e.exports=function e(t,r){var s,n;return(void 0===r&&(r=!0),t&&"object"==typeof t)?(s=r,Object.keys(t).forEach(function(r){t[r]=e(t[r],s)}),t):Array.isArray(t)?(n=r,t.forEach(function(r,i){t[i]=e(r,n)}),t):i.is(t,r)?i.parse(t):t}},"./node_modules/@segment/isodate/lib/index.js":(e,t)=>{"use strict";var r=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;t.parse=function(e){var t=[1,5,6,7,11,12],i=r.exec(e),s=0;if(!i)return new Date(e);for(var n,o=0;n=t[o];o++)i[n]=parseInt(i[n],10)||0;return i[2]=parseInt(i[2],10)||1,i[3]=parseInt(i[3],10)||1,i[2]--,i[8]=i[8]?(i[8]+"00").substring(0,3):0," "===i[4]?s=new Date().getTimezoneOffset():"Z"!==i[9]&&i[10]&&(s=60*i[11]+i[12],"+"===i[10]&&(s=0-s)),new Date(Date.UTC(i[1],i[2],i[3],i[5],i[6]+s,i[7],i[8]))},t.is=function(e,t){return"string"==typeof e&&(!t||!1!==/^\d{4}-\d{2}-\d{2}/.test(e))&&r.test(e)}},"./node_modules/decode-uri-component/index.js":e=>{"use strict";var t="%[a-f0-9]{2}",r=RegExp("("+t+")|([^%]+?)","gi"),i=RegExp("("+t+")+","gi");e.exports=function(e){if("string"!=typeof e)throw TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},s=i.exec(e);s;){try{t[s[0]]=decodeURIComponent(s[0])}catch(e){var n=function(e){try{return decodeURIComponent(e)}catch(s){for(var t=e.match(r)||[],i=1;i<t.length;i++)t=(e=(function e(t,r){try{return[decodeURIComponent(t.join(""))]}catch(e){}if(1===t.length)return t;r=r||1;var i=t.slice(0,r),s=t.slice(r);return Array.prototype.concat.call([],e(i),e(s))})(t,i).join("")).match(r)||[];return e}}(s[0]);n!==s[0]&&(t[s[0]]=n)}s=i.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),a=0;a<o.length;a++){var l=o[a];e=e.replace(RegExp(l,"g"),t[l])}return e}(e)}}},"./node_modules/filter-obj/index.js":e=>{"use strict";e.exports=function(e,t){for(var r={},i=Object.keys(e),s=Array.isArray(t),n=0;n<i.length;n++){var o=i[n],a=e[o];(s?-1!==t.indexOf(o):t(o,a,e))&&(r[o]=a)}return r}},"./node_modules/js-cookie/src/js.cookie.js":e=>{!function(t){"function"==typeof define&&define.amd&&define(t),e.exports=t()}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var i in r)t[i]=r[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(i){function s(){}function n(t,r,n){if("undefined"!=typeof document){"number"==typeof(n=e({path:"/"},s.defaults,n)).expires&&(n.expires=new Date(new Date*1+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var o=JSON.stringify(r);/^[\{\[]/.test(o)&&(r=o)}catch(e){}r=i.write?i.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var l in n)n[l]&&(a+="; "+l,!0!==n[l]&&(a+="="+n[l].split(";")[0]));return document.cookie=t+"="+r+a}}function o(e,r){if("undefined"!=typeof document){for(var s={},n=document.cookie?document.cookie.split("; "):[],o=0;o<n.length;o++){var a=n[o].split("="),l=a.slice(1).join("=");r||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(a[0]);if(l=(i.read||i)(l,c)||t(l),r)try{l=JSON.parse(l)}catch(e){}if(s[c]=l,e===c)break}catch(e){}}return e?s[e]:s}}return s.set=n,s.get=function(e){return o(e,!1)},s.getJSON=function(e){return o(e,!0)},s.remove=function(t,r){n(t,"",e(r,{expires:-1}))},s.defaults={},s.withConverter=r,s}(function(){})})},"./node_modules/memoize-one/dist/memoize-one.esm.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var i=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function s(e,t){if(e.length!==t.length)return!1;for(var r,s,n=0;n<e.length;n++)if(!((r=e[n])===(s=t[n])||i(r)&&i(s)))return!1;return!0}function n(e,t){void 0===t&&(t=s);var r=null;function i(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(r&&r.lastThis===this&&t(i,r.lastArgs))return r.lastResult;var n=e.apply(this,i);return r={lastResult:n,lastArgs:i,lastThis:this},n}return i.clear=function(){r=null},i}},"./node_modules/process/browser.js":e=>{var t,r,i,s=e.exports={};function n(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l=[],c=!1,u=-1;function d(){c&&i&&(c=!1,i.length?l=i.concat(l):u=-1,l.length&&p())}function p(){if(!c){var e=a(d);c=!0;for(var t=l.length;t;){for(i=l,l=[];++u<t;)i&&i[u].run();u=-1,t=l.length}i=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new h(e,t)),1!==l.length||c||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}},"./node_modules/query-string/index.js":(e,t,r)=>{"use strict";let i=r("./node_modules/strict-uri-encode/index.js"),s=r("./node_modules/decode-uri-component/index.js"),n=r("./node_modules/split-on-first/index.js"),o=r("./node_modules/filter-obj/index.js"),a=e=>null==e,l=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw TypeError("arrayFormatSeparator must be single character string")}function u(e,t){return t.encode?t.strict?i(e):encodeURIComponent(e):e}function d(e,t){return t.decode?s(e):e}function p(e){let t=e.indexOf("#");return -1!==t&&(e=e.slice(0,t)),e}function h(e){let t=(e=p(e)).indexOf("?");return -1===t?"":e.slice(t+1)}function m(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function f(e,t){c((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);let r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,i)=>{if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t){i[e]=r;return}void 0===i[e]&&(i[e]={}),i[e][t[1]]=r};case"bracket":return(e,r,i)=>{if(t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),!t){i[e]=r;return}if(void 0===i[e]){i[e]=[r];return}i[e]=[].concat(i[e],r)};case"colon-list-separator":return(e,r,i)=>{if(t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),!t){i[e]=r;return}if(void 0===i[e]){i[e]=[r];return}i[e]=[].concat(i[e],r)};case"comma":case"separator":return(t,r,i)=>{let s="string"==typeof r&&r.includes(e.arrayFormatSeparator),n="string"==typeof r&&!s&&d(r,e).includes(e.arrayFormatSeparator);r=n?d(r,e):r;let o=s||n?r.split(e.arrayFormatSeparator).map(t=>d(t,e)):null===r?r:d(r,e);i[t]=o};case"bracket-separator":return(t,r,i)=>{let s=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!s){i[t]=r?d(r,e):r;return}let n=null===r?[]:r.split(e.arrayFormatSeparator).map(t=>d(t,e));if(void 0===i[t]){i[t]=n;return}i[t]=[].concat(i[t],n)};default:return(e,t,r)=>{if(void 0===r[e]){r[e]=t;return}r[e]=[].concat(r[e],t)}}}(t),i=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return i;for(let s of e.split("&")){if(""===s)continue;let[e,o]=n(t.decode?s.replace(/\+/g," "):s,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?o:d(o,t),r(d(e,t),o,i)}for(let e of Object.keys(i)){let r=i[e];if("object"==typeof r&&null!==r)for(let e of Object.keys(r))r[e]=m(r[e],t);else i[e]=m(r,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce((e,t)=>{let r=i[t];return r&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):e[t]=r,e},Object.create(null))}t.extract=h,t.parse=f,t.stringify=(e,t)=>{if(!e)return"";c((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);let r=r=>t.skipNull&&a(e[r])||t.skipEmptyString&&""===e[r],i=function(e){switch(e.arrayFormat){case"index":return t=>(r,i)=>{let s=r.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,[u(t,e),"[",s,"]"].join("")]:[...r,[u(t,e),"[",u(s,e),"]=",u(i,e)].join("")]};case"bracket":return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,[u(t,e),"[]"].join("")]:[...r,[u(t,e),"[]=",u(i,e)].join("")];case"colon-list-separator":return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,[u(t,e),":list="].join("")]:[...r,[u(t,e),":list=",u(i,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(i,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?i:(s=null===s?"":s,0===i.length)?[[u(r,e),t,u(s,e)].join("")]:[[i,u(s,e)].join(e.arrayFormatSeparator)]}default:return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,u(t,e)]:[...r,[u(t,e),"=",u(i,e)].join("")]}}(t),s={};for(let t of Object.keys(e))r(t)||(s[t]=e[t]);let n=Object.keys(s);return!1!==t.sort&&n.sort(t.sort),n.map(r=>{let s=e[r];return void 0===s?"":null===s?u(r,t):Array.isArray(s)?0===s.length&&"bracket-separator"===t.arrayFormat?u(r,t)+"[]":s.reduce(i(r),[]).join("&"):u(r,t)+"="+u(s,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[r,i]=n(e,"#");return Object.assign({url:r.split("?")[0]||"",query:f(h(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:d(i,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0,[l]:!0},r);let i=p(e.url).split("?")[0]||"",s=t.extract(e.url),n=Object.assign(t.parse(s,{sort:!1}),e.query),o=t.stringify(n,r);o&&(o=`?${o}`);let a=function(e){let t="",r=e.indexOf("#");return -1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(a=`#${r[l]?u(e.fragmentIdentifier,r):e.fragmentIdentifier}`),`${i}${o}${a}`},t.pick=(e,r,i)=>{i=Object.assign({parseFragmentIdentifier:!0,[l]:!1},i);let{url:s,query:n,fragmentIdentifier:a}=t.parseUrl(e,i);return t.stringifyUrl({url:s,query:o(n,r),fragmentIdentifier:a},i)},t.exclude=(e,r,i)=>{let s=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,s,i)}},"./node_modules/react/cjs/react.production.min.js":(e,t)=>{"use strict";var r=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator,m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||m}function b(){}function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var C=v.prototype=new b;C.constructor=v,f(C,y.prototype),C.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,O={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,i){var s,n={},o=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,s)&&!I.hasOwnProperty(s)&&(n[s]=t[s]);var l=arguments.length-2;if(1===l)n.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];n.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===n[s]&&(n[s]=l[s]);return{$$typeof:r,type:e,key:o,ref:a,props:n,_owner:O.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var S=/\/+/g;function k(e,t){var r,i;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,i={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return i[e]})):t.toString(36)}function j(e,t,s){if(null==e)return e;var n=[],o=0;return!function e(t,s,n,o,a){var l,c,u,d=typeof t;("undefined"===d||"boolean"===d)&&(t=null);var p=!1;if(null===t)p=!0;else switch(d){case"string":case"number":p=!0;break;case"object":switch(t.$$typeof){case r:case i:p=!0}}if(p)return a=a(p=t),t=""===o?"."+k(p,0):o,w(a)?(n="",null!=t&&(n=t.replace(S,"$&/")+"/"),e(a,s,n,"",function(e){return e})):null!=a&&(A(a)&&(l=a,c=n+(!a.key||p&&p.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+t,a={$$typeof:r,type:l.type,key:c,ref:l.ref,props:l.props,_owner:l._owner}),s.push(a)),1;if(p=0,o=""===o?".":o+":",w(t))for(var m=0;m<t.length;m++){var f=o+k(d=t[m],m);p+=e(d,s,n,f,a)}else if("function"==typeof(f=null===(u=t)||"object"!=typeof u?null:"function"==typeof(u=h&&u[h]||u["@@iterator"])?u:null))for(t=f.call(t),m=0;!(d=t.next()).done;)f=o+k(d=d.value,m++),p+=e(d,s,n,f,a);else if("object"===d)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(s=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return p}(e,n,"","",function(e){return t.call(s,e,o++)}),n}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},x={transition:null};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,r){j(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=o,t.PureComponent=v,t.StrictMode=n,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:x,ReactCurrentOwner:O},t.act=D,t.cloneElement=function(e,t,i){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=f({},e.props),n=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=O.current),void 0!==t.key&&(n=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:r,type:e.type,key:n,ref:o,props:s,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=x.transition;x.transition={};try{e()}finally{x.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,r){return P.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,r){return P.current.useReducer(e,t,r)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return P.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},"./node_modules/react/index.js":(e,t,r)=>{"use strict";e.exports=r("./node_modules/react/cjs/react.production.min.js")},"./node_modules/split-on-first/index.js":e=>{"use strict";e.exports=(e,t)=>{if(!("string"==typeof e&&"string"==typeof t))throw TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];let r=e.indexOf(t);return -1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},"./node_modules/strict-uri-encode/index.js":e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},"./packages/browser/index.ts":(e,t,r)=>{"use strict";r.d(t,{Pi:()=>V,oJ:()=>d,IO:()=>a,eO:()=>c,fm:()=>U,Z0:()=>k,ft:()=>B,m0:()=>w,zC:()=>q,H8:()=>g,xl:()=>S,F3:()=>f,oi:()=>D,Ab:()=>F,Cr:()=>M,gm:()=>h,mc:()=>N,lT:()=>p,mU:()=>I,N1:()=>O,aR:()=>E,j9:()=>C,cX:()=>v,nr:()=>y,CI:()=>A,uF:()=>b,ME:()=>u,E4:()=>R,SQ:()=>L});var i=r("./packages/config/index.ts");let s="unknown-browser-version",n=(e,t)=>{let{userAgent:r}=t,i=r.indexOf(e);if(-1!==i){let t=r.substring(i+e.length+1);return t.includes(".")?parseFloat(t.split(".").slice(0,2).join(".")):parseInt(t,10)}return s},o=e=>{if(!e.userAgent.includes("CriOS"))return n("Version",e);{let t=e.userAgent.match(/OS ([0-9]+)_[0-9]+(_[0-9]+)? like Mac OS X/);return t?+t[1]:s}},a=((e,t)=>{let{userAgent:r,vendor:i}=e,s=!!t.documentMode,n=r.includes("Edg/"),o=r.includes("Edge"),a=r.includes("Opera")||r.includes("OPR"),l=r.includes("Vivaldi"),c=r.includes("Firefox"),u=r.includes("UCBrowser"),d=r.includes("SamsungBrowser"),p=i.includes("Yandex"),h=r.includes("Chrom")&&!n&&!o&&!a&&!p&&!l&&!d&&!u,m=r.includes("CriOS")||i.includes("Apple")&&!h;switch(!0){case h:return"chrome";case c:return"firefox";case m:return"safari";case n:return"edg";case o:return"edge-legacy";case s:return"explorer";case a:return"opera";case p:return"yandex";case l:return"vivaldi";case u:return"ucbrowser";case d:return"samsung";default:return"unknown-browser"}})(navigator,document),l=((e,t)=>{switch(e){case"chrome":{let e=n("Chrome",t);return e!==s?e:n("CriOS",t)}case"firefox":return n("Firefox",t);case"safari":return o(t);case"edg":return n("Edg",t);case"edge-legacy":return n("Edge",t);case"opera":return n("OPR",t);case"explorer":{let e=n("MSIE",t);return e!==s?e:n("rv",t)}case"yandex":return n("YaBrowser",t);case"vivaldi":return n("Vivaldi",t);case"samsung":return n("SamsungBrowser",t);case"ucbrowser":return n("UCBrowser",t);default:return s}})(a,navigator),c=`${a}-${l}`,u=(e=>{let{userAgent:t,platform:r}=e,i=r.includes("Win"),s=r.includes("Mac"),n=r.includes("Linux"),o=t.includes("Android"),a=t.includes("iPad"),l=t.includes("iPod"),c=t.includes("iPhone");switch(!0){case i:return"windows";case s:return"mac";case a:return"ipad";case l:return"ipod";case c:return"iphone";case o:return"android";case n:return"linux";default:return"unknown-os"}})(navigator),d=`${a} ${c} ${u}`,p=()=>"explorer"===a,h=()=>"firefox"===a,m=()=>"edg"===a,f=()=>"edge-legacy"===a,g=()=>"chrome"===a,y=()=>"safari"===a,b=()=>"windows"===u,v=()=>"mac"===u,C=()=>"linux"===u,w=()=>"android"===u,_=()=>"ipad"===u,O=()=>"ipod"===u,I=()=>"iphone"===u,E=()=>_()||I()||O(),A=()=>_()||I()||O()||w(),S=()=>i.R0===i.l0.Desktop,k=()=>navigator.language||navigator.browserLanguage||"unknown";var j=r("./node_modules/memoize-one/dist/memoize-one.esm.js"),T=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/get-cookie/index.js");let P=(0,j.A)(e=>"true"===(0,T.R)("force_atlassian_embeddedDocument")),x=(0,j.A)(e=>"true"===(0,T.R)("force_embeddedDocument")||P(e));function D(){return x(document.cookie)||window.top!==window.self}let N=()=>window.devicePixelRatio>1,R=()=>g()||h()||m(),L=()=>g()||h()||y(),M=()=>{if(!D())return!1;let e=new URLSearchParams(window.location.search);return e.has("iframeSource")&&"msteams"===e.get("iframeSource")},F=()=>{if(P(document.cookie))return!0;if(!D())return!1;let e=new URLSearchParams(window.location.search);return e.has("iframeSource")&&"atlassian-smart-link"===e.get("iframeSource")},U=()=>S()||M()||F();function B(){return"ResizeObserver"in window}let $={chrome:124,firefox:115,edg:125,safari:16,opera:109,vivaldi:3};function q(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return t!==s&&!!Object.prototype.hasOwnProperty.call($,e)&&t>=$[e]}class V{disconnect(){}observe(){}unobserve(){}}},"./packages/config/index.ts":(e,t,r)=>{"use strict";var i,s;r.d(t,{l0:()=>n,$8:()=>B,qV:()=>R,ad:()=>L,fg:()=>N,R0:()=>a,Nc:()=>M,xb:()=>$,Jr:()=>ei,Xj:()=>O,R4:()=>I,Pf:()=>eo,rT:()=>_,PI:()=>w,ac:()=>P,Sn:()=>et,Ov:()=>er,JR:()=>g,$B:()=>c,CT:()=>l,cZ:()=>T,vT:()=>Q,iD:()=>Y,cA:()=>F,lk:()=>y,A5:()=>K,kO:()=>G,Gw:()=>S,_Y:()=>k,dq:()=>j,oO:()=>D,tp:()=>d,l$:()=>p,Jt:()=>U,jg:()=>m,So:()=>Z,Mf:()=>q,qT:()=>v,Hg:()=>es,Qq:()=>E,Eu:()=>C,qX:()=>z,U$:()=>H,Zz:()=>A,Q7:()=>b,tx:()=>W,Yq:()=>J,mx:()=>en,rX:()=>h,xZ:()=>x,mW:()=>f,w0:()=>X,LQ:()=>V});let n={Desktop:"desktop"},o=window.init_config||{},a=o.appId||null,l=o.dontDismissNotifications||null;o.limitMemoryUsage;let c=o.desktopVersion||"0";function u(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let d="chlg06CfblVj204fihGEqA",p="env-8",h="https://trello-slack.services.atlassian.com",m=!1,f="https://p.trellocdn.com",g="56d5e249a98895a9797bebb9",y="5a999cd36066c584c097f193",b="5f4ff6881ce8e97c81d2f605",v="5c2462c384ab8949b1724a20",C="5ad892c30b141641d32919bf",w="588a331cc86ffbe08f5d2c67",_="https://admin.atlassian.com/billing",O="https://trello-attachments.s3.amazonaws.com",I="https://trello-backgrounds.s3.amazonaws.com",E="https://trello-logos.s3.amazonaws.com",A="f7936f71-2186-4c33-8553-134e287aefdf",S="330642982326-o2b8p0glj3m1o0sgllrpas2m8j9hjn7i.apps.googleusercontent.com",k="AIzaSyAvSBSs9sIV0S5wf4ivvDrwYp6Q20e7jGE",j="122616814543-k4q6th338f4j05dkv1qgvcbutlpa0voe.apps.googleusercontent.com",T="36ipz29apw2svq8",P="zclwcvudmddhz0cscz3w6awtcfs8bne3",x="pk_live_51IaUVrBgOoA7vC4WlHhHNjTeOOqbF7d56Ge0Vvju0qbrBJGLdBmpeGQntGWaCgVKPk3c2itZOuTuFjcxmMyC6g4m00DL5aSU1K",D="AIzaSyBGuM0ku7LVKH0l45qQsvvUnG2H2jUX0GU",N="PROD",R="trello.com/gateway/api/gasv3/api/v1",L="https",M="1f24403e-f053-43de-b063-e20b357a8f63",F="prod",U="https://id.atlassian.com",B="https://admin.atlassian.com",$="wss://trello.com/gateway/api/graphql/subscriptions",q="https://janus.prod.atl-paas.net",V="https://www.atlassian.com",W="https://1609e814bfa14a3db09f984e6426cfd3@o55978.ingest.sentry.io/5988847",z="6052d130068a8c0de7b022b4",H="https://appsource.microsoft.com/en-us/product/office/WA200002592?tab=Overview",K="6052d16c340ed23e9da083ed",G="https://workspace.google.com/marketplace/app/trello_for_gmail/710372432947",Q="6052d0bb1b3c162630f54230",J=!0,X="https://trello-server.us-east-1.prod.atl-paas.net",Y="inbox@app.trello.com",Z=!1,ee=null!==(i=null===(s=window)||void 0===s?void 0:s.trelloVersion)&&void 0!==i?i:"dev-0",et=new class{constructor(e){u(this,"head",void 0),u(this,"patch",0),u(this,"version",void 0);let t=e.split("-");this.head=t.slice(0,-1).join("-"),this.version=parseFloat(t.slice(-1)[0])}toString(){return`${this.head}-${this.fullVersion()}`}toJSON(){return this.toString()}fullVersion(){return[this.version,this.patch].filter(e=>e).join(".")||0}}(ee),er=et.toString(),ei=["538627f73cbb44d1bfbb58f0","58adea146fcdb5f4e50bebf2"],es=window.locale||"en",en=location.origin||/^[^/]+?[/]{2}[^/]+/.exec(location.href)[0],eo=window.__bifrost_track__},"./packages/feature-flag-client/src/getRecordedFeatureFlag.ts":(e,t,r)=>{"use strict";let i;r.d(t,{r:()=>n});var s=r("./packages/storage/index.ts");function n(e,t){var r;let n=s._q.get("featureFlagSnapshot"),{remote:o={},overrides:a={}}=null!=n?n:{},l=a[e],c=o[e],u=null!==(r=null!=l?l:c)&&void 0!==r?r:t;return"phx.member-boards-slim-quickload"===e?(void 0===i&&(i=u),i):u}},"./packages/id-cache/index.ts":(e,t,r)=>{"use strict";r.d(t,{ij:()=>n,qv:()=>d,g$:()=>u,x2:()=>o});let i=RegExp("ari:cloud:trello::[^/]+/(.+/)?[a-z0-9]{24}$"),s=RegExp("^[a-f0-9]*$");function n(e){return(null!=e?e.constructor.name:void 0)==="ObjectID"||(null!=e?e.length:void 0)===24&&s.test(e)}function o(e){return"string"==typeof e&&/^[a-zA-Z0-9]{8}$/.test(e)}function a(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=new WeakSet;function c(e){return Object.keys(e).reduce((t,r)=>(t[e[r]]=r,t),{})}function u(e){return/^[0-9]{1,8}$/.test(e.toString())}let d=new class{constructor(){!function(e,t){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}(this,l),a(this,"idMap",void 0),a(this,"ariMap",void 0),this.idMap={Card:{},Board:{},Workspace:{}},this.ariMap={Card:{},Board:{},Workspace:{}}}getId(e,t){return n(t)?t:this.idMap[e][t]}setId(e,t,r){if(!n(r))throw Error(`Not an id: ${r}`);if("Workspace"!==e&&!o(t))throw Error(`Not a shortLink: ${t}`);return this.idMap[e][t]=r}deleteId(e,t){this.getId(e,t)&&delete this.idMap[e][t]}getAri(e,t){return i.test(t)?t:this.ariMap[e][t]}setAri(e,t,r){if(!i.test(r))throw Error(`Not an ARI: ${r}`);if("Workspace"!==e&&!o(t))throw Error(`Not a shortLink: ${t}`);return this.ariMap[e][t]=r}setCardId(e,t){return this.setId("Card",e,t)}setBoardId(e,t){return this.setId("Board",e,t)}setWorkspaceId(e,t){return this.setId("Workspace",e,t)}getCardId(e){return this.getId("Card",e)}getBoardId(e){return this.getId("Board",e)}getWorkspaceId(e){return this.getId("Workspace",e)}setCardAri(e,t){return this.setAri("Card",e,t)}setBoardAri(e,t){return this.setAri("Board",e,t)}setWorkspaceAri(e,t){return this.setAri("Workspace",e,t)}getCardAri(e){return this.getAri("Card",e)}getBoardAri(e){return this.getAri("Board",e)}getWorkspaceAri(e){return this.getAri("Workspace",e)}__getBoardShortLinkById__DO_NOT_USE(e){if(n(e))return(function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")})(l,this,c).call(this,this.idMap.Board)[e]}}},"./packages/invitation-tokens/src/getInvitationTokens.ts":(e,t,r)=>{"use strict";r.d(t,{Q:()=>i});let i=()=>{let e;let t=[],r=/invite-token-[-a-f0-9]*=([^;]+)/g;for(;e=null===(i=r.exec(document.cookie))||void 0===i?void 0:i[1];){var i;t.push(unescape(e))}if(t.length>0)return t.join(",")}},"./packages/quickload/src/cleanPreload.ts":(e,t,r)=>{"use strict";r.d(t,{l:()=>i});let i=e=>({isLoading:e.isLoading,start:e.start,used:e.used,url:e.url})},"./packages/quickload/src/formatUrl.ts":(e,t,r)=>{"use strict";r.d(t,{J:()=>s});var i=r("./packages/invitation-tokens/src/getInvitationTokens.ts");let s=(e,t)=>{var r,s,n;let{rootId:o,idModel:a}=t,l=e.replace(o,a),c=null===(r=window)||void 0===r?void 0:null===(s=r.document)||void 0===s?void 0:s.cookie;if(RegExp("^/1/search").test(e)){let e=null===(n=/dsc=([^;]+)/.exec(c))||void 0===n?void 0:n[1];l+=`&dsc=${null!=e?e:"undefined"}`}let u=(0,i.Q)(),d=l.includes("?");return l+(u?`${d?"&":"?"}invitationTokens=${u}`:"")}},"./packages/quickload/src/getPreloadsFromPath.ts":(e,t,r)=>{"use strict";r.d(t,{m:()=>u});var i=r("./packages/feature-flag-client/src/getRecordedFeatureFlag.ts"),s=r("./packages/id-cache/index.ts"),n=r("./packages/quickload/src/formatUrl.ts");let o={header:{taskName:null,requests:[{url:"/1/member/:idMember?fields=id%2CaaBlockSyncUntil%2CaaEmail%2CaaId%2CactivityBlocked%2CavatarHash%2CavatarUrl%2Cbio%2CbioData%2Cconfirmed%2CcredentialsRemovedCount%2CdomainClaimed%2Cemail%2CfullName%2CidBoards%2CidEnterprise%2CidEnterprisesAdmin%2CidEnterprisesDeactivated%2CidEnterprisesImplicitAdmin%2CidMemberReferrer%2CidOrganizations%2CidPremOrgsAdmin%2Cinitials%2CisAaMastered%2CixUpdate%2Climits%2CloginTypes%2CmarketingOptIn%2CmemberType%2CmessagesDismissed%2CnonPublic%2CnonPublicAvailable%2ConeTimeMessagesDismissed%2Cprefs%2CpremiumFeatures%2Cproducts%2CrequiresAaOnboarding%2CsessionType%2Cstatus%2Ctrophies%2Curl%2Cusername&campaigns=true&enterpriseLicenses=true&enterprises=true&enterprise_filter=saml%2Cmember%2Cmember-unconfirmed%2Cowned&enterprise_fields=id%2CdisplayName%2CidAdmins%2ClogoUrl%2Cname%2Coffering%2CorganizationPrefs%2Cprefs%2Csandbox%2CsandboxExpiry&enterpriseWithRequiredConversion=true&logins=true&organizations=all&organization_fields=id%2CcreationMethod%2CdisplayName%2CenterpriseJoinRequest%2CidEnterprise%2CidEntitlement%2CjwmLink%2ClogoHash%2Cname%2Coffering%2CpremiumFeatures%2Cproducts&organization_enterprise=true&organization_paidAccount=true&organization_paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CdatePendingDisabled%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CdatePendingDisabled%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&pluginData=true&savedSearches=true&teamify=true",rootId:":idMember",operationName:"quickload:MemberHeader",modelName:"Member"},{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2CnodeId%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Csubscribed%2Curl&board_memberships=me&board_organization=true&board_organization_fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts&boardStars=true&credits=invitation%2CpromoCode&organizations=all&organization_fields=id%2Ccredits%2Climits%2Cmemberships%2Cprefs%2CpremiumFeatures",rootId:":idMember",operationName:"quickload:MemberBoards",modelName:"Member",featureFlag:{key:"phx.member-boards-slim-quickload",value:"false",defaultValue:"false"}},{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2CnodeId%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Csubscribed%2Curl&board_memberships=me&boardStars=true&credits=invitation%2CpromoCode&organizations=all&organization_fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts",rootId:":idMember",operationName:"quickload:MemberBoardsSlim",modelName:"Member",featureFlag:{key:"phx.member-boards-slim-quickload",value:"true",defaultValue:"false"}}]},"^/b/([^/]+)":{taskName:"view-board",requests:[{url:"/1/board/:idBoard?fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2Cdesc%2CdescData%2CenterpriseOwned%2CidEnterprise%2CidMemberCreator%2CidOrganization%2CidTags%2ClabelNames%2Climits%2Cmemberships%2Cname%2CnodeId%2CpowerUps%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Csubscribed%2CtemplateGallery%2Curl&organization_disable_mock=true&boardPlugins=true&customFields=true&enterprise=true&enterprise_fields=id%2CaiPrefs%2CdisplayName&labels=all&label_fields=id%2Ccolor%2CidBoard%2Cname&labels_limit=1000&members=all&member_fields=id%2CactivityBlocked%2CavatarUrl%2Cbio%2CbioData%2Cconfirmed%2CfullName%2CidEnterprise%2CidMemberReferrer%2CidPremOrgsAdmin%2Cinitials%2CmemberType%2CnonPublic%2Curl%2Cusername&memberships_orgMemberType=true&myPrefs=true&organization=true&organization_fields=id%2Cdesc%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Curl%2Cwebsite&organization_enterprise=true&organization_memberships=all&organization_pluginData=true&organization_tags=true&pluginData=true",rootId:":idBoard",operationName:"quickload:CurrentBoardInfo",modelName:"Board"},{url:"/1/board/:idBoard?fields=id&cards=visible&card_fields=id%2Caddress%2Cbadges%2CcardRole%2Cclosed%2Ccoordinates%2Ccover%2CcreationMethodError%2CdateLastActivity%2Cdesc%2CdescData%2Cdue%2CdueComplete%2CdueReminder%2CidAttachmentCover%2CidBoard%2CidLabels%2CidList%2CidMembers%2CidShort%2CisTemplate%2Clabels%2Climits%2ClocationName%2Cname%2Cpinned%2Cpos%2CshortLink%2CshortUrl%2Cstart%2Csubscribed%2Curl&card_attachments=true&card_attachment_fields=id%2Cbytes%2Cdate%2CedgeColor%2CfileName%2CidMember%2CisUpload%2CmimeType%2Cname%2Cpos%2Curl&card_checklists=all&card_checklist_fields=id%2CidBoard%2CidCard%2Cname%2Cpos&card_checklist_checkItems=none&card_customFieldItems=true&card_pluginData=true&card_stickers=true&lists=open&list_fields=id%2Cclosed%2Ccolor%2CcreationMethod%2Cdatasource%2CidBoard%2Climits%2Cname%2Cpos%2CsoftLimit%2Csubscribed%2Ctype",rootId:":idBoard",operationName:"quickload:CurrentBoardListsCards",modelName:"Board"},{url:"/gateway/api/graphql",rootId:":idBoard",operationName:"quickload:TrelloCurrentBoardInfo",modelName:"TrelloBoard",featureFlag:{key:"fep.native-current-board-full",value:"true",defaultValue:"true"},graphQLPayload:{query:'query TrelloCurrentBoardInfo($id:TrelloShortLink!){trello{boardByShortLink(shortLink:$id)@optIn(to:"TrelloBoard"){id __typename closed creationMethod creator{id __typename objectId}customFields{__typename nodes{__typename display{__typename cardFront}name objectId options{__typename color objectId position value{__typename text}}position type}}description{__typename customData{emojis(first:-1){nodes{name url}}}text}enterprise{id __typename displayName objectId}enterpriseOwned galleryInfo{id __typename avatarShape avatarUrl blurb byline category{__typename key}featured language{__typename description enabled language locale localizedDescription}precedence stats{__typename copyCount viewCount}}labels(first:-1){__typename nodes{id __typename color name objectId}}lastActivityAt limits{__typename attachments{__typename perBoard{__typename disableAt status warnAt}perCard{__typename disableAt status warnAt}}boards{__typename totalMembersPerBoard{__typename disableAt status warnAt}}cards{__typename openPerBoard{__typename disableAt status warnAt}openPerList{__typename disableAt status warnAt}totalPerBoard{__typename disableAt status warnAt}totalPerList{__typename disableAt status warnAt}}checkItems{__typename perChecklist{__typename disableAt status warnAt}}checklists{__typename perBoard{__typename disableAt status warnAt}perCard{__typename disableAt status warnAt}}customFieldOptions{__typename perField{__typename disableAt status warnAt}}customFields{__typename perBoard{__typename disableAt status warnAt}}labels{__typename perBoard{__typename disableAt status warnAt}}lists{__typename openPerBoard{__typename disableAt status warnAt}totalPerBoard{__typename disableAt status warnAt}}reactions{__typename perAction{__typename disableAt status warnAt}uniquePerAction{__typename disableAt status warnAt}}stickers{__typename perCard{__typename disableAt status warnAt}}}members(first:-1){__typename edges{__typename membership{__typename deactivated objectId type unconfirmed workspaceMemberType}node{id __typename activityBlocked avatarUrl bio bioData confirmed enterprise{id __typename objectId}fullName initials nonPublicData{__typename avatarUrl fullName initials}objectId url username}}}name objectId powerUpData(first:-1){__typename nodes{__typename access objectId powerUp{objectId}scope value}}powerUps(filter:{access:"enabled"},first:-1){edges{__typename node{__typename objectId}objectId}}prefs{__typename background{__typename bottomColor brightness color image imageScaled{height url width}tile topColor}calendarFeedEnabled canInvite cardAging cardCovers comments hiddenPowerUpBoardButtons{__typename objectId}hideVotes invitations isTemplate permissionLevel selfJoin switcherViews{__typename enabled viewType}voting}premiumFeatures shortLink shortUrl tags(first:-1){__typename nodes{__typename objectId}}url viewer{__typename calendarKey email{__typename key list{id __typename objectId}position}lastSeenAt sidebar{__typename show}subscribed}workspace{id __typename description displayName enterprise{id __typename displayName objectId}limits{__typename freeBoards{__typename disableAt status warnAt}freeCollaborators{__typename disableAt status warnAt}totalMembers{__typename disableAt status warnAt}}logoHash members(first:-1){__typename edges{__typename membership{__typename deactivated objectId type unconfirmed}}nodes{id __typename objectId}}name objectId offering prefs{__typename associatedDomain attachmentRestrictions boardDeleteRestrict{__typename enterprise org private public}boardInviteRestrict boardVisibilityRestrict{__typename enterprise org private public}externalMembersDisabled orgInviteRestrict permissionLevel}tags(first:-1){__typename nodes{__typename name objectId}}url website}}}}',variables:{id:":idBoard"},operationName:"TrelloCurrentBoardInfo"}}]},"^//([^/]*([^/]+))$":{taskName:null,requests:[{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boardStars=true",rootId:":idMember",operationName:"quickload:MemberQuickBoards",modelName:"Member"},{url:"/1/search?query=:searchTerm&partial=true&modelTypes=boards&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl",rootId:":searchTerm",operationName:"quickload:QuickBoardsSearch",modelName:"Search"}]},"^/search":{taskName:null,requests:[{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boardStars=true",rootId:":idMember",operationName:"quickload:MemberQuickBoards",modelName:"Member"}]},"^//$":{taskName:null,requests:[{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boardStars=true",rootId:":idMember",operationName:"quickload:MemberQuickBoards",modelName:"Member"}]},"^/c/([^/]+)":{taskName:"view-board",requests:[{url:"/1/card/:idCard?fields=id%2Cbadges%2CcardRole%2Cclosed%2Ccover%2CcreationMethodError%2CdateLastActivity%2Cdesc%2CdescData%2Cdue%2CdueComplete%2CdueReminder%2Cemail%2CidAttachmentCover%2CidBoard%2CidChecklists%2CidLabels%2CidList%2CidMemberCreator%2CidMembers%2CidMembersVoted%2CidShort%2CisTemplate%2Clabels%2Climits%2CmanualCoverAttachment%2Cname%2Cpinned%2Cpos%2CshortLink%2CshortUrl%2Cstart%2Csubscribed%2Curl&attachments=true&attachment_fields=id%2Cbytes%2Cdate%2CedgeColor%2CfileName%2CidMember%2CisUpload%2CmimeType%2Cname%2Cpos%2Cpreviews%2Curl&customFieldItems=true&pluginData=true&stickers=true&sticker_fields=id%2Cimage%2CimageScaled%2CimageUrl%2Cleft%2Crotate%2Ctop%2CzIndex",rootId:":idCard",operationName:"quickload:PreloadCard",modelName:"Card"}],deferredPreloads:["CurrentBoardInfo","CurrentBoardListsCards"]},"^/w/([^/]+)/billing$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Cmemberships%2Cname%2Coffering%2Cprefs%2Cproducts&enterprise=true&memberships=active",rootId:":idOrganization",operationName:"quickload:OrganizationBillingPage",modelName:"Organization"}]},"^/([^/]+)/billing$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Cmemberships%2Cname%2Coffering%2Cprefs%2Cproducts&enterprise=true&memberships=active",rootId:":idOrganization",operationName:"quickload:OrganizationBillingPage",modelName:"Organization"}]},"^/w/(?!search)(?!create-first-team)(?!blank)(?!shortcuts)(?!templates)(?!redeem)([^/]+)$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Cwebsite&boards=open&boards_count=29&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&enterprise=true&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceBoardsPageMinimal",modelName:"Organization"}]},"^/(?!search)(?!create-first-team)(?!blank)(?!shortcuts)(?!templates)(?!redeem)([^/]+)$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Cwebsite&boards=open&boards_count=29&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&enterprise=true&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceBoardsPageMinimal",modelName:"Organization"}]},"^/w/([^/]+)/home$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Cwebsite&boards=open&boards_count=100&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&board_membershipCounts=active&board_starCounts=organization&enterprise=true&members=all&member_fields=id&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceHomePageMinimal",modelName:"Organization"}]},"^/([^/]+)/home$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Cwebsite&boards=open&boards_count=100&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&board_membershipCounts=active&board_starCounts=organization&enterprise=true&members=all&member_fields=id&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceHomePageMinimal",modelName:"Organization"}]},"^/u/([^/]+)/boards$":{taskName:null,requests:[{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2CnodeId%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Csubscribed%2Curl&board_memberships=me&board_organization=true&board_organization_fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts&boardStars=true&credits=invitation%2CpromoCode&organizations=all&organization_fields=id%2Ccredits%2Climits%2Cmemberships%2Cprefs%2CpremiumFeatures",rootId:":idMember",operationName:"quickload:MemberBoardsHome",modelName:"Member",featureFlag:{key:"phx.member-boards-slim-quickload",value:"true",defaultValue:"false"}}]}};function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){var i,s;i=t,s=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let c=e=>!e.featureFlag||(0,i.r)(e.featureFlag.key,e.featureFlag.defaultValue)===e.featureFlag.value,u=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.pathname,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search;arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.document.cookie;let i=t.replace(/\?(.*)$/,""),a=Object.keys(o).find(e=>{if("header"===e)return!1;let t=o[e].requests,r=new RegExp(e);return!!t.find(c)&&r.test(i)}),u=a&&o[a].requests.filter(c),d=a&&o[a].deferredPreloads?o[a].deferredPreloads:[],p=a&&o[a].taskName||null,h=(null===(e=new RegExp(a||"").exec(i))||void 0===e?void 0:e[1])||"";RegExp("^/search$").test(t)&&(h=new URLSearchParams(r).get("q")||"");let m=(0,s.x2)(h);return{path:i,preloads:o.header.requests.filter(c).concat(u||[]).filter(e=>{let{graphQLPayload:t}=e;return!t||m}).map(e=>{let{url:t,rootId:r,operationName:i,modelName:s,graphQLPayload:o}=e,a={url:(0,n.J)(t,{rootId:r,idModel:":idMember"===r?"me":h}),operationName:i,modelName:s,queryName:i.replace("quickload:",""),taskName:p};return o&&(a.graphQLPayload=l(l({},o),{},{variables:{id:":idMember"===r?"me":h}})),a}),deferredPreloads:d,param:h}}},"./packages/quickload/src/preloadsHash.ts":(e,t,r)=>{"use strict";r.d(t,{P:()=>s,x:()=>i});let i=e=>{let{url:t,graphQLPayload:r}=e;if(!r)return t;{let{operationName:e,variables:t}=r;return`${e}:${JSON.stringify(t)}`}},s={}},"./packages/quickload/src/quickload.ts":(e,t,r)=>{"use strict";r.d(t,{I:()=>g});var i=r("./packages/feature-flag-client/src/getRecordedFeatureFlag.ts"),s=r("./packages/quickload/src/cleanPreload.ts"),n=r("./packages/quickload/src/getPreloadsFromPath.ts");let o=()=>{let e="";for(let t=0;t<16;t+=1)e+="0123456789abcdef"[Math.floor(16*Math.random())];return e},a=()=>Math.floor(Date.now()/1e3).toString(16)+(o().slice(8)+o());function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}var c=r("./packages/quickload/src/preloadsHash.ts");let u=function(e){try{return JSON.parse(e)}catch(e){return null}},d=function(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unknown",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"quickload",a=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=new Headers;c.append("Content-Type","application/json; charset=utf-8"),c.append("Accept","application/json"),c.append("X-Trello-Client-Version",window.trelloVersion||"dev-0"),c.append("X-Trello-Operation-Source",n),c.append("X-Trello-Operation-Name",s),a&&(c.append("X-Trello-TraceId",a),c.append("X-B3-TraceId",a),c.append("X-B3-SpanId",o()),c.append("X-Trello-Task",l||"not-implemented")),(async()=>{try{let n=!0===(0,i.r)("fep.operation-name-in-url",!1),o=await fetch(n&&s?`${e}?operationName=${s}`:e,{method:"POST",headers:c,body:JSON.stringify(t)});if(o.ok){let e=await o.json();r(null,[e,null])}else r([o.status,await o.text()])}catch(e){r([0,"failed to fetch"])}})()},p=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"model-loader",n=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,l=new XMLHttpRequest,c=!0===(0,i.r)("fep.operation-name-in-url",!1);l.open("GET",c&&r?`${e}&operationName=${r}`:e,!0),l.setRequestHeader("Accept","application/json,text/plain"),l.setRequestHeader("X-Trello-Client-Version",window.trelloVersion||"dev-0"),l.setRequestHeader("X-Trello-Operation-Source",s),l.setRequestHeader("X-Trello-Operation-Name",r),n&&(l.setRequestHeader("X-Trello-TraceId",n),l.setRequestHeader("X-B3-TraceId",n),l.setRequestHeader("X-B3-SpanId",o()),l.setRequestHeader("X-Trello-Task",a||"not-implemented")),l.onreadystatechange=function(){4===l.readyState&&(200!==l.status?t([l.status,l.responseText]):t(null,[u(l.responseText),l]))},l.send(null)},h=function(e){e in c.P&&delete c.P[e]},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"preload",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if(!e)return;let n={isLoading:!0,callbacks:[],start:Date.now(),used:!1,url:e,traceId:i},o=(0,c.x)({url:e,graphQLPayload:r});if(c.P[o]=n,r){d(e,r,function(e,t){if(n.isLoading=!1,e){for(let t of(n.error=e,Array.from(n.callbacks)))t(e);return}for(let e of(n.data=t,Array.from(n.callbacks)))e(null,t)},t,"quickload",i,s);return}p(e,function(e,t){let r;if(n.isLoading=!1,e){for(r of(n.error=e,Array.from(n.callbacks)))r(e);return}for(r of(n.data=t,Array.from(n.callbacks)))r(null,t)},t,"quickload",i,s)},f={init(){let e=a(),{preloads:t}=(0,n.m)();for(let{url:r,operationName:i,graphQLPayload:s,taskName:n}of t)m(r,i,s,e,n)},getPreloadsFromPath:n.m,makeUrl:function(e,t){var r,i;let s,n;n=void 0===t?{}:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){var i,s;i=t,s=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t);let o=[],a=/invite-token-[-a-f0-9]*=([^;]+)/g;for(;void 0!==(s=null===(r=a.exec(document.cookie))||void 0===r?void 0:r[1]);)o.push(unescape(s));if(o.length>0&&(n.invitationTokens=o.join(",")),RegExp("^/1/search(/|$)").test(e)){let e=null===(i=/dsc=([^;]+)/.exec(document.cookie))||void 0===i?void 0:i[1];e&&(n.dsc=e)}let c=[];for(let e in n){let t=n[e];c.push([e,encodeURIComponent(t)].join("="))}return[e,c.join("&")].join("?")},load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=(0,c.x)({url:e}),l=c.P[a];if(void 0!==l)return l.used=!0,l.isLoading?l.callbacks.push(t):t(l.error,l.data),(0,s.l)(l);p(e,t,r,i,n,o)},getPreloadTraceId(){let{preloads:e}=(0,n.m)();for(let{url:t,graphQLPayload:r}of e){let e=(0,c.x)({url:t,graphQLPayload:r});if(e in c.P)return c.P[e].traceId}},clear(){for(let e in c.P)h(e)},markComplete(){this.status="complete"},status:"pending"};f.init();let g=window.QuickLoad=f},"./packages/storage/index.ts":(e,t,r)=>{"use strict";r.d(t,{Y6:()=>c,_q:()=>l,yR:()=>d});var i=r("./packages/browser/index.ts");class s{constructor(){!function(e,t,r){var i;(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"storage",void 0),this.storage={}}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(e){return this.storage[e]||null}key(e){return Object.keys(this.storage)[e]||null}removeItem(e){delete this.storage[e]}setItem(e,t){this.storage[e]=t||""}}let n={LOCAL_STORAGE_KEY:"localStorage",SESSION_STORAGE_KEY:"sessionStorage"};function o(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.LOCAL_STORAGE_KEY;o(this,"storage",void 0),o(this,"listeners",void 0),o(this,"errorListeners",void 0),o(this,"listenersSyncedAcrossBrowser",void 0),o(this,"LISTENER_IGNORABLE_KEY_PREFIXES",/^(awc\.)/),o(this,"onStorage",e=>{let{key:t,oldValue:r,newValue:i}=e;!t||t.match(this.LISTENER_IGNORABLE_KEY_PREFIXES)||this.broadcastChangeFromOtherInstance({key:t,oldValue:r,newValue:i})}),o(this,"getAllKeys",()=>this.storage?Object.keys(this.storage):[]),this.listeners=new Set,this.errorListeners=new Set,this.listenersSyncedAcrossBrowser=new Set,(0,i.oi)()&&!function(e){let t;try{t=window[e];let r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(e){return!!(e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length)}}(e)?this.storage=new s:this.storage=window[e],window.addEventListener("storage",this.onStorage)}listen(e){this.listeners.add(e)}addErrorListener(e){this.errorListeners.add(e)}removeErrorListener(e){this.errorListeners.delete(e)}listenSyncedAcrossBrowser(e){this.listenersSyncedAcrossBrowser.add(e),this.listen(e)}unlisten(e){this.listeners.delete(e),this.listenersSyncedAcrossBrowser.delete(e)}broadcastLocalChange(e){this.listeners.forEach(t=>{t(e)})}broadcastError(e){this.errorListeners.forEach(t=>{t(e)})}broadcastChangeFromOtherInstance(e){this.listenersSyncedAcrossBrowser.forEach(t=>{t(e)})}isEnabled(){return!!this.storage}set(e,t){try{if(this.storage){let r=this.getRaw(e),i=JSON.stringify(t);this.storage.setItem(e,i),this.broadcastLocalChange({key:e,oldValue:r,newValue:i})}}catch(t){console.warn(t),this.broadcastError({key:e,error:t})}}get(e){let t=null,r=this.getRaw(e);if(r)try{t=JSON.parse(r)}catch(e){console.warn(e)}return t}getRaw(e){return this.storage?this.storage.getItem(e):null}unset(e){this.storage&&null!==this.getRaw(e)&&this.storage.removeItem(e)}}let l=new a(n.LOCAL_STORAGE_KEY),c=new a(n.SESSION_STORAGE_KEY);var u=r("./node_modules/react/index.js");let d=(e,t)=>{let[r,i]=(0,u.useState)(t),s=(0,u.useCallback)(t=>{i(t),null===t?l.unset(e):l.set(e,t)},[e]);return(0,u.useEffect)(()=>{let t=l.get(e);i(null!=t?t:r)},[]),[r,s]}},"./node_modules/@babel/runtime/helpers/regeneratorRuntime.js":(e,t,r)=>{var i=r("./node_modules/@babel/runtime/helpers/typeof.js").default;function s(){"use strict";e.exports=s=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,r){return e[t]=r}}function h(e,r,i,s){var n,o,l=Object.create((r&&r.prototype instanceof v?r:v).prototype);return a(l,"_invoke",{value:(n=new T(s||[]),o=f,function(r,s){if(o===g)throw Error("Generator is already running");if(o===y){if("throw"===r)throw s;return{value:t,done:!0}}for(n.method=r,n.arg=s;;){var a=n.delegate;if(a){var l=function e(r,i){var s=i.method,n=r.iterator[s];if(n===t)return i.delegate=null,"throw"===s&&r.iterator.return&&(i.method="return",i.arg=t,e(r,i),"throw"===i.method)||"return"!==s&&(i.method="throw",i.arg=TypeError("The iterator does not provide a '"+s+"' method")),b;var o=m(n,r.iterator,i.arg);if("throw"===o.type)return i.method="throw",i.arg=o.arg,i.delegate=null,b;var a=o.arg;return a?a.done?(i[r.resultName]=a.value,i.next=r.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,b):a:(i.method="throw",i.arg=TypeError("iterator result is not an object"),i.delegate=null,b)}(a,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var c=m(e,i,n);if("normal"===c.type){if(o=n.done?y:"suspendedYield",c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}})}),l}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=h;var f="suspendedStart",g="executing",y="completed",b={};function v(){}function C(){}function w(){}var _={};p(_,c,function(){return this});var O=Object.getPrototypeOf,I=O&&O(O(P([])));I&&I!==n&&o.call(I,c)&&(_=I);var E=w.prototype=v.prototype=Object.create(_);function A(e){["next","throw","return"].forEach(function(t){p(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){var r;a(this,"_invoke",{value:function(s,n){function a(){return new t(function(r,a){!function r(s,n,a,l){var c=m(e[s],e,n);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==i(d)&&o.call(d,"__await")?t.resolve(d.__await).then(function(e){r("next",e,a,l)},function(e){r("throw",e,a,l)}):t.resolve(d).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,l)})}l(c.arg)}(s,n,r,a)})}return r=r?r.then(a,a):a()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,n=function r(){for(;++s<e.length;)if(o.call(e,s))return r.value=e[s],r.done=!1,r;return r.value=t,r.done=!0,r};return n.next=n}}throw TypeError(i(e)+" is not iterable")}return C.prototype=w,a(E,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:C,configurable:!0}),C.displayName=p(w,d,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===C||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,p(e,d,"GeneratorFunction")),e.prototype=Object.create(E),e},r.awrap=function(e){return{__await:e}},A(S.prototype),p(S.prototype,u,function(){return this}),r.AsyncIterator=S,r.async=function(e,t,i,s,n){void 0===n&&(n=Promise);var o=new S(h(e,t,i,s),n);return r.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},A(E),p(E,d,"Generator"),p(E,c,function(){return this}),p(E,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},r.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(i,s){return a.type="throw",a.arg=e,r.next=i,s&&(r.method="next",r.arg=t),!!s}for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s],a=n.completion;if("root"===n.tryLoc)return i("end");if(n.tryLoc<=this.prev){var l=o.call(n,"catchLoc"),c=o.call(n,"finallyLoc");if(l&&c){if(this.prev<n.catchLoc)return i(n.catchLoc,!0);if(this.prev<n.finallyLoc)return i(n.finallyLoc)}else if(l){if(this.prev<n.catchLoc)return i(n.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return i(n.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var n=s?s.completion:{};return n.type=e,n.arg=t,s?(this.method="next",this.next=s.finallyLoc,b):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var s=i.arg;j(r)}return s}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:P(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),b}},r}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/typeof.js":e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/regenerator/index.js":(e,t,r)=>{var i=r("./node_modules/@babel/runtime/helpers/regeneratorRuntime.js")();e.exports=i;try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js":(e,t,r)=>{"use strict";function i(e,t,r,i,s,n,o){try{var a=e[n](o),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(i,s)}function s(e){return function(){var t=this,r=arguments;return new Promise(function(s,n){var o=e.apply(t,r);function a(e){i(o,s,n,a,l,"next",e)}function l(e){i(o,s,n,a,l,"throw",e)}a(void 0)})}}r.d(t,{A:()=>s})},"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js":(e,t,r)=>{"use strict";function i(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}r.d(t,{A:()=>i})},"./node_modules/@babel/runtime/helpers/esm/createClass.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var i=r("./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");function s(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,(0,i.A)(s.key),s)}}function n(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}},"./node_modules/@babel/runtime/helpers/esm/defineProperty.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r("./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");function s(e,t,r){return(t=(0,i.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},"./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");function s(e,t){if(null==e)return{};var r,s,n=(0,i.A)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],t.includes(r)||({}).propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}},"./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":(e,t,r)=>{"use strict";function i(e,t){if(null==e)return{};var r={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(t.includes(i))continue;r[i]=e[i]}return r}r.d(t,{A:()=>i})},"./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r("./node_modules/@babel/runtime/helpers/esm/typeof.js");function s(e){var t=function(e,t){if("object"!=(0,i.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=(0,i.A)(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,i.A)(t)?t:t+""}},"./node_modules/@babel/runtime/helpers/esm/typeof.js":(e,t,r)=>{"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,{A:()=>i})}},e=>{e(e.s="./packages/quickload/src/quickload.ts")}]);
//# sourceMappingURL=quickload.f5526b04b66f5128c81d.js.map